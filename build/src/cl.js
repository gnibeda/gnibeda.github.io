void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var t=[];return{REVISION:"14",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)},update:function(e){if(0===t.length)return!1;var r=0;for(e=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r<t.length;)t[r].update(e)?r++:t.splice(r,1);return!0}}}();TWEEN.Tween=function(t){var e=t,r={},o={},n={},s=1e3,i=0,a=!1,c=!1,l=!1,p=0,h=null,u=TWEEN.Easing.Linear.None,f=TWEEN.Interpolation.Linear,d=[],g=null,m=!1,x=null,v=null,y=null;for(var b in t)r[b]=parseFloat(t[b],10);this.to=function(t,e){return void 0!==e&&(s=e),o=t,this},this.start=function(t){TWEEN.add(this),c=!0,m=!1,h=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=p;for(var s in o){if(o[s]instanceof Array){if(0===o[s].length)continue;o[s]=[e[s]].concat(o[s])}r[s]=e[s],r[s]instanceof Array==0&&(r[s]*=1),n[s]=r[s]||0}return this},this.stop=function(){return c?(TWEEN.remove(this),c=!1,null!==y&&y.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=d.length;e>t;t++)d[t].stop()},this.delay=function(t){return p=t,this},this.repeat=function(t){return i=t,this},this.yoyo=function(t){return a=t,this},this.easing=function(t){return u=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return d=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return x=t,this},this.onComplete=function(t){return v=t,this},this.onStop=function(t){return y=t,this},this.update=function(t){var c;if(h>t)return!0;m===!1&&(null!==g&&g.call(e),m=!0);var y=(t-h)/s;y=y>1?1:y;var b=u(y);for(c in o){var A=r[c]||0,w=o[c];w instanceof Array?e[c]=f(w,b):("string"==typeof w&&(w=A+parseFloat(w,10)),"number"==typeof w&&(e[c]=A+(w-A)*b))}if(null!==x&&x.call(e,b),1==y){if(i>0){isFinite(i)&&i--;for(c in n){if("string"==typeof o[c]&&(n[c]=n[c]+parseFloat(o[c],10)),a){var S=n[c];n[c]=o[c],o[c]=S}r[c]=n[c]}return a&&(l=!l),h=t+p,!0}null!==v&&v.call(e);for(var C=0,E=d.length;E>C;C++)d[C].start(t);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o)))},Out:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/o)+1)},InOut:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var r=t.length-1,o=r*e,n=Math.floor(o),s=TWEEN.Interpolation.Utils.Linear;return 0>e?s(t[0],t[1],o):e>1?s(t[r],t[r-1],r-o):s(t[n],t[n+1>r?r:n+1],o-n)},Bezier:function(t,e){var r,o=0,n=t.length-1,s=Math.pow,i=TWEEN.Interpolation.Utils.Bernstein;for(r=0;n>=r;r++)o+=s(1-e,n-r)*s(e,r)*t[r]*i(n,r);return o},CatmullRom:function(t,e){var r=t.length-1,o=r*e,n=Math.floor(o),s=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(0>e&&(n=Math.floor(o=r*(1+e))),s(t[(n-1+r)%r],t[n],t[(n+1)%r],t[(n+2)%r],o-n)):0>e?t[0]-(s(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[r]-(s(t[r],t[r],t[r-1],t[r-1],o-r)-t[r]):s(t[n?n-1:0],t[n],t[n+1>r?r:n+1],t[n+2>r?r:n+2],o-n)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=TWEEN.Interpolation.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var r,o=1;if(t[e])return t[e];for(r=e;r>1;r--)o*=r;return t[e]=o}}(),CatmullRom:function(t,e,r,o,n){var s=.5*(r-t),i=.5*(o-e),a=n*n,c=n*a;return(2*e-2*r+s+i)*c+(-3*e+3*r-2*s-i)*a+s*n+e}}},"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN);var cl=function(){var t="1.0.0";return t!=="{{Package.Json.Version}}".toLowerCase()&&console.log("%c ˖•● ChartLibrary v."+t+" ●•˖ ","background: #44A; color: #FFF"),{version:"1.0.0"}}();cl.Utils=function(){"use strict";function t(){this.merge=r,this.extend=e,this.colorLuminance=o,this.distSq=n,this.lineRectIntersect=i,this.distToSegmentSquared=s,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}()}function e(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype}function r(t,e,o){for(var n in e)if(e.hasOwnProperty(n)&&(!o||-1===o.indexOf(n)))try{e[n].constructor==Object?t[n]=r(t[n]||{},e[n]):t[n]=e[n]}catch(s){t[n]=e[n]}return t}function o(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var r,o,n="#";for(o=0;3>o;o++)r=parseInt(t.substr(2*o,2),16),r=Math.round(Math.min(Math.max(0,r+r*e),255)).toString(16),n+=("00"+r).substr(r.length);return n}function n(t,e,r,o){return(t-r)*(t-r)+(e-o)*(e-o)}function s(t,e,r,o,n,s){var i=cl.Utils.distSq(r,o,n,s);if(0===i)return cl.Utils.distSq(t,e,r,o);var a=((t-r)*(n-r)+(e-o)*(s-o))/i;return 0>a?cl.Utils.distSq(t,e,r,o):a>1?cl.Utils.distSq(t,e,n,s):cl.Utils.distSq(t,e,r+a*(n-r),o+a*(s-o))}function i(t,e,r,o,n,s,i,a){var c=n,l=i;if(n>i&&(c=i,l=n),l>r&&(l=r),t>c&&(c=t),c>l)return!1;var p=s,h=a,u=i-n;if(Math.abs(u)>1e-7){var f=(a-s)/u,d=s-f*n;p=f*c+d,h=f*l+d}if(p>h){var g=h;h=p,p=g}return h>o&&(h=o),e>p&&(p=e),p>h?!1:!0}return new t}(),cl.Lang=function(){"use strict";function t(){this.get=e}function e(t,e){if(!o[r]||!o[r][t])return t;var n=o[r][t]||t;if(e instanceof Array)for(var s=0;s<e.length;s++)n=n.replace("%"+(s+1).toString(),e[s]);else n=n.replace("%1",e);return n}var r="en",o={en:{errNoElements:"No element specified in options",errAxisHaveNoChart:"Trying to access axis with no parent chart",errDelBaseAxis:"Can not delete base '%1' axis",errShapeNoParam:"Can not create shape without '%1' parameter",errUnknownEvent:"Unknown event '%1'",errNoShapeClass:"Shape class is not specified",errShapeType:"Can not add shape, because same shape with different type already exists"}};return new t}(),cl.Consts=function(){"use strict";function t(){cl.Utils.merge(this,e)}var e={COLOR_BLACK:"#000000",COLOR_WHITE:"#FFFFFF",COLOR_GRAY:"#AAAAAA",COLOR_RED:"#FF0000",COLOR_GREEN:"#00FF00",COLOR_BLUE:"#0000FF",COLOR_LIGHTBLUE:"#AAAAFF",FONT_SIZE:14,FONT_NAME:"Arial",TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,RAD_TO_DEG:Math.PI/180};return new t}(),cl.Color=function(){"use strict";function t(){var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];this.fromString=function(e){return t[e]?"#"+t[e]:e},this.toHex=function(t,e,r){var o=t.toString(16),n=e.toString(16),s=r.toString(16);return 1==o.length&&(o="0"+o),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),"#"+o+n+s},this.toRGB=function(r){"#"==r.charAt(0)&&(r=r.substr(1,6)),r=r.replace(/ /g,"").toLowerCase(),t[r]&&(r=t[r]);var o,n,s,i;i=!1;for(var a=0;a<e.length;a++){var c=e[a].re,l=e[a].process,p=c.exec(r);if(p){var h=l(p);o=h[0],n=h[1],s=h[2],i=!0}}return o=0>o||isNaN(o)?0:o>255?255:o,n=0>n||isNaN(n)?0:n>255?255:n,s=0>s||isNaN(s)?0:s>255?255:s,{r:o,g:n,b:s}}}return new t}(),cl.Event=function(){"use strict";function t(){this.x=null,this.y=null,this.target=null,this.originalEvent=null,this.type=null}var e={click:"click",doubleClick:"dblclick",mouseMove:"mousemove",mouseDown:"mousedown",mouseUp:"mouseup",shapeOver:"shapeover",shapeOut:"shapeout",select:"select",deselect:"deselect"};return cl.Utils.merge(t,e),t}(),cl.EventManager=function(){"use strict";function t(t){function e(t,e){if(!g[t])throw new Error(cl.Lang.get("errUnknownEvent",t));-1===g[t].indexOf(e)&&g[t].push(e)}function r(t,e){if(!g[t])throw new Error(cl.Lang.get("errUnknownEvent",t));var r=g[t].indexOf(e);-1!==r&&g[t].splice(r,1)}function o(t){if(f.mouseX=t.offsetX,f.mouseY=t.offsetY,h(cl.Event.shapeOver)||h(cl.Event.shapeOut)){var e=f.chart.selector.shapeFromPoint(f.mouseX,f.mouseY);e?m!==e&&c(cl.Event.shapeOver,t,e):null!==m&&c(cl.Event.shapeOut,t,m),m=e}c(cl.Event.mouseMove,t)}function n(t){f.mouseDown=!0,c(cl.Event.mouseDown,t)}function s(t){(f.mouseDown||t.currentTarget!==document)&&(f.mouseDown=!1,c(cl.Event.mouseUp,t),t.stopPropagation())}function i(t){c(cl.Event.click,t,f.chart.selector.shapeFromPoint(t.offsetX,t.offsetY))}function a(t){c(cl.Event.doubleClick,t,f.chart.selector.shapeFromPoint(t.offsetX,t.offsetY))}function c(t,e,r,o,n){if(f.hasListener(t)){var s,i;s=void 0===o?f.chart.xAxis.toAxis(e.offsetX):o,i=void 0===n?f.chart.yAxis.toAxis(e.offsetY):n,d.x=s,d.y=i,d.target=r,d.originalEvent=e;for(var a=0,c=g[t].length;c>a;a++)g[t][a](d)}}function l(){var t=f.chart.screen.el;t.addEventListener(cl.Event.mouseMove,o),t.addEventListener(cl.Event.mouseDown,n),t.addEventListener(cl.Event.mouseUp,s),t.addEventListener(cl.Event.click,i),t.addEventListener(cl.Event.doubleClick,a),document.addEventListener(cl.Event.mouseUp,s)}function p(){var t=f.chart.screen.el;t.removeEventListener(cl.Event.mouseMove,o),t.removeEventListener(cl.Event.mouseDown,n),t.removeEventListener(cl.Event.mouseUp,s),t.removeEventListener(cl.Event.click,i),t.removeEventListener(cl.Event.doubleClick,a),document.removeEventListener(cl.Event.mouseUp,s)}function h(t){return 0!==g[t].length}function u(){f.chart=null,d=null,g=null,p()}var f=this;f.chart=t,f.mouseX=0,f.mouseY=0,f.mouseDown=!1,f.destroy=u,f.hasListener=h,f.addEventListener=e,f.removeEventListener=r,f.callListeners=c;var d=new cl.Event,g={},m=null;for(var x in cl.Event)g[cl.Event[x]]=[];l()}return t}(),cl.Layer=function(){"use strict";function t(t){var e=this;this.chart=t,this.options={visible:!0},this.surface=new cl.Canvas(t.width,t.height),this.dirtyFlagName="",Object.defineProperties(e,{visible:{get:function(){return e.options.visible},set:function(t){e.options.visible=t}}})}return t.prototype.show=function(){return this.options&&(this.options.visible=!0),this},t.prototype.hide=function(){return this.options&&(this.options.visible=!1),this},t.prototype.apply=function(){this.chart&&(this.chart.setDirtyFlag(this.dirtyFlagName),this.chart.redraw())},t.prototype.render=function(){},t.prototype.resize=function(t,e){return this.surface.resize(t,e),this},t.prototype.destroy=function(){this.chart=null,this.surface.destroy(),this.surface=null},t}(),cl.Axis=function(){"use strict";function t(t,e){function r(){return N.options.ticks.big.interval}function o(t){return N.options.ticks.big.interval=t,N}function n(){return N.options.ticks.small.interval}function s(t){return N.options.ticks.small.interval=t,N}function i(){return N.options.visible=!1,N}function a(){return N.options.visible=!0,N}function c(){return N.options.title.style}function l(t){return N.options.title.style=t,N}function p(){return N.options.title.color}function h(t){return N.options.title.color=t,N}function u(){return N.options.title.font}function f(t){return N.options.title.font=t,N}function d(){return N.options.title.size}function g(t){return N.options.title.size=t,N}function m(){return N.options.title.align}function x(t){return N.options.title.align=t,N}function v(t){return N.options.style.color=t,N}function y(){return N.options.style.color}function b(){return{start:N.options.margin.start,end:N.options.margin.end}}function A(t,e){return N.options.margin.start=t,N.options.margin.end=e,N}function w(t){return N.options.offset=t,N}function S(){return N.options.offset}function C(){return N.options.max}function E(){return N.options.min}function k(t){return N.options.max=t,N}function L(t){return N.options.min=t,N}function P(t){return N.options.name=t,N}function M(){return N.options.name}function T(t){if(N.options&&N.options.visible){var e,r,o,n,s=N.options,i="y"==N.options.type,a=(s.margin.start,s.margin.end,N.chart.width,N.chart.height,s.ticks.small.interval.toString()),c=a.indexOf("."),l=0;-1!==c&&(l=a.length-c-1),t.resetTransform(),t.setLineStyle(s.style.lineWidth,s.style.color),t.setFillColor(s.style.color),i?(n=N.options.offset,t.ctx.translate(N.chart.xAxis.toScreen(n),0),t.ctx.rotate(cl.Consts.HALF_PI)):(n=N.options.offset,t.ctx.translate(0,N.chart.yAxis.toScreen(n))),t.save(),0!==s.style.lineDash.length&&t.setLineDash(s.style.lineDash),t.drawLine(N.toScreen(s.min),0,N.toScreen(s.max),0),t.restore(),0!==s.style.arrowSize&&t.drawArrow(N.toScreen(s.max),0,i?Math.PI:0,s.style.arrowSize);var p=0,h=0,u=!1;switch(s.ticks.big.align){case"right":case"top":p=-s.ticks.big.size;break;case"center":case"middle":p=-s.ticks.big.size/2;break;case"left":case"bottom":p=0}switch(s.ticks.small.align){case"right":case"top":h=-s.ticks.small.size;break;case"center":case"middle":h=-s.ticks.small.size/2;break;case"left":case"bottom":h=0}var f,d,g;for("x"===s.type?(f=N.chart.yAxis.toScreen(N.chart.yAxis.getMin()),d=N.chart.yAxis.toScreen(N.chart.yAxis.getMax()),g=N.chart.yAxis.toScreen(n)):(f=-N.chart.xAxis.toScreen(N.chart.xAxis.getMin()),d=-N.chart.xAxis.toScreen(N.chart.xAxis.getMax()),g=-N.chart.xAxis.toScreen(n)),e=s.min,r=s.max-s.min;e<=s.max;)o=Math.floor(N.toScreen(e)),u=e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0)),u?(e+s.ticks.big.interval<=s.max||s.ticks.big.last)&&(e!=s.min||s.ticks.big.first)&&(0!==s.grid.big.width&&(t.setLineStyle(s.grid.big.width,s.grid.big.color),t.setAlpha(s.grid.big.opacity),0!==s.grid.big.dash.length&&t.setLineDash(s.grid.big.dash),t.drawLine(o,f-g,o,d-g)),0!==s.ticks.size&&(t.setLineStyle(s.style.lineWidth,s.ticks.big.color),t.setAlpha(s.ticks.big.opacity),t.setLineDash([]),"dot"===s.ticks.big.type?(t.setFillColor(s.ticks.big.color),t.ctx.beginPath(),t.ctx.arc(o,p+s.ticks.big.size/2,s.ticks.big.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(o,p,o,p+s.ticks.big.size))):(e+s.ticks.big.interval<=s.max||s.ticks.small.last)&&(e!=s.min+s.ticks.small.interval||s.ticks.small.first)&&(0!==s.grid.small.width&&(t.setLineStyle(s.grid.small.width,s.grid.small.color),t.setAlpha(s.grid.small.opacity),0!==s.grid.small.dash.length&&t.setLineDash(s.grid.small.dash),t.drawLine(o,f-g,o,d-g)),0!==s.ticks.sizeSmall&&(t.setLineStyle(s.style.lineWidth,s.ticks.small.color),t.setAlpha(s.ticks.small.opacity),t.setLineDash([]),"dot"===s.ticks.small.type?(t.setFillColor(s.ticks.small.color),t.ctx.beginPath(),t.ctx.arc(o,h+s.ticks.small.size/2,s.ticks.small.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(o,h,o,h+s.ticks.small.size))),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(l));if(t.ctx.globalAlpha=1,t.setLineDash([]),0!==s.title.size){var m=s.title.align;switch("bottom"===m&&(m="left"),"top"===m&&(m="right"),m){case"left":o=Math.floor(N.toScreen(s.min));break;case"right":o=Math.floor(N.toScreen(s.max));break;case"center":o=Math.floor(N.toScreen(s.min+(s.max-s.min)/2));break;default:o=0}"y"===s.type&&(t.ctx.translate(o,s.title.size+2*(s.title.offset+s.ticks.big.size+s.labels.big.size)),t.ctx.rotate(Math.PI)),t.setFillColor(s.title.color),t.drawText(s.name,"y"===s.type?0:o,s.title.offset+s.ticks.big.size+s.labels.big.size,s.title.size,m,"top",s.title.font,s.title.style),"y"===s.type&&(t.ctx.rotate(-Math.PI),t.ctx.translate(-o,-(s.title.size+2*(s.title.offset+s.ticks.big.size+s.labels.big.size))))}var x=s.labels.big.align,v=s.labels.small.align;if("y"===s.type){switch("bottom"===x?x="right":"top"===x?x="left":"middle"===x&&(x="center"),"bottom"===v?v="right":"top"===v?v="left":"middle"===v&&(v="center"),x){case"center":case"middle":p=0;break;case"right":p=s.ticks.big.size;break;case"left":p=-s.ticks.big.size}switch(v){case"center":case"middle":h=0;break;case"right":h=s.ticks.small.size;break;case"left":h=-s.ticks.small.size}}else{switch("bottom"===x?x="top":"top"===x&&(x="bottom"),"left"===x?x="right":"right"===x&&(x="left"),"bottom"===v?v="top":"top"===v&&(v="bottom"),"left"===v?v="right":"right"===v&&(v="left"),x){case"center":case"middle":p=0;break;case"top":case"left":p=s.ticks.big.size}switch(v){case"center":case"middle":h=0;break;case"top":case"left":h=s.ticks.small.size}}for(e=s.min,r=s.max-s.min;e<=s.max;)o=Math.floor(N.toScreen(e)),e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0))?0!==s.ticks.big.size&&(e+s.ticks.big.interval<=s.max||s.ticks.big.last)&&(e!=s.min||s.ticks.big.first)&&(t.setFillColor(s.labels.big.color),t.setAlpha(s.labels.big.opacity),"y"===s.type?(t.ctx.translate(o,p),t.ctx.rotate(-cl.Consts.HALF_PI),t.drawText(s.labels.big.before+e.toFixed(l)+s.labels.big.after,0,0,s.labels.big.size,x,"center",s.labels.big.font,s.labels.big.style),t.ctx.rotate(cl.Consts.HALF_PI),t.ctx.translate(-o,-p)):t.drawText(s.labels.big.before+e.toFixed(l)+s.labels.big.after,o,p,s.labels.big.size,"center",x,s.labels.big.font,s.labels.big.style)):0!==s.ticks.small.size&&(e+s.ticks.big.interval<=s.max||s.ticks.small.last)&&(e!=s.min+s.ticks.small.interval||s.ticks.small.first)&&(t.setFillColor(s.labels.small.color),t.setAlpha(s.labels.small.opacity),"y"===s.type?(t.ctx.translate(o,h),t.ctx.rotate(-cl.Consts.HALF_PI),t.drawText(s.labels.small.before+e.toFixed(l)+s.labels.small.after,0,0,s.labels.small.size,v,"center",s.labels.small.font,s.labels.small.style),t.ctx.rotate(cl.Consts.HALF_PI),t.ctx.translate(-o,-h)):t.drawText(s.labels.small.before+e.toFixed(l)+s.labels.small.after,o,h,s.labels.small.size,"center",v,s.labels.small.font,s.labels.small.style)),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(l));t.setAlpha(1),t.resetTransform()}}function _(t){if(!N.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=N.chart.width;return"x"===N.options.type?N.options.min+(t-N.options.margin.start)/(e-N.options.margin.start-N.options.margin.end)*(N.options.max-N.options.min):(e=N.chart.height,t=e-t,N.options.min+(t-N.options.margin.start)/(e-N.options.margin.start-N.options.margin.end)*(N.options.max-N.options.min))}function O(t){if(!N.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=N.chart.width;return"x"===N.options.type?N.options.margin.start+(t-N.options.min)/(N.options.max-N.options.min)*(e-N.options.margin.start-N.options.margin.end):(e=N.chart.height,N.chart.height-(N.options.margin.start+(t-N.options.min)/(N.options.max-N.options.min)*(e-N.options.margin.start-N.options.margin.end)))}function I(){return N.parent.apply(),N}function z(t){return N.options.style.lineWidth=t,N}function F(){return N.options.style.lineWidth}function D(){N.options=null,N.chart=null}var N=this;N.parent=t,N.chart=t.chart,N.show=a,N.hide=i,N.apply=I,N.toAxis=_,N.setMin=L,N.setMax=k,N.getMax=C,N.getMin=E,N.render=T,N.setName=P,N.getName=M,N.destroy=D,N.setColor=v,N.getColor=y,N.toScreen=O,N.getOffset=S,N.setOffset=w,N.setMargins=A,N.getMargins=b,N.setLineWidth=z,N.getLineWidth=F,N.setTitleSize=g,N.getTitleSize=d,N.setTitleFont=f,N.getTitleFont=u,N.setTitleAlign=x,N.getTitleAlign=m,N.setTitleColor=h,N.getTitleColor=p,N.setTitleStyle=l,N.getTitleStyle=c,N.setTickInterval=o,N.getTickInterval=r,N.getTickIntervalSmall=n,N.setTickIntervalSmall=s,N.options={name:"",type:"x",min:0,max:100,offset:0,ticks:{big:{interval:10,size:8,align:"center",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line",first:!0,last:!0},small:{interval:5,size:4,align:"bottom",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line",first:!0,last:!0}},margin:{start:20,end:20},style:{lineWidth:2,color:cl.Consts.COLOR_GRAY,arrowSize:12,lineDash:[]},title:{size:14,align:"center",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_BLACK,style:"",offset:0},labels:{big:{size:10,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1,before:"",after:""},small:{size:8,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1,before:"",after:""}},grid:{big:{width:1,dash:[3,3],color:"#BEBEBE",opacity:.5},small:{width:1,dash:[10,10],color:"#EFEFEF",opacity:.5}},visible:!0},cl.Utils.merge(N.options,e||{}),e&&(e.min||e.max)&&(e.ticks&&e.ticks.big&&e.ticks.big.interval||(N.options.ticks.big.interval=parseFloat(((N.options.max-N.options.min)/10).toFixed(4))),e.ticks&&e.ticks.small&&e.ticks.small.interval||(N.options.ticks.small.interval=parseFloat(((N.options.max-N.options.min)/20).toFixed(4))))}return t}(),cl.AxisManager=function(){"use strict";function t(t){function e(){var t,e;for(i.surface.resetTransform(),i.surface.clear(),t=0,e=i.shapes.length;e>t;t++)i.shapes[t].render(i.surface)}function r(t){var e=new cl.Axis(i,t||{});return i.shapes.push(e),i.apply(),e}function o(t){var e,r;if("string"!=typeof t)return i.shapes[t];for(e=0,r=i.shapes.length;r>e;e++)if(i.shapes[e].getName()===t)return i.shapes[e]}function n(t){if(t){if(console.log(i),t===i.chart.xAxis||t===i.chart.yAxis)throw cl.Lang.get("errDelBaseAxis",t.options.type);var e=i.shapes.indexOf(t);-1!==e&&i.shapes[e]&&(i.shapes.splice(e,1),i.apply(),t.destroy())}}function s(t){switch(typeof t){case"object":n(t);break;default:n(o(t))}}var i=this;cl.Layer.call(i,t),i.add=r,i.get=o,i.remove=s,i.render=e,i.chart=t,i.shapes=[],i.dirtyFlagName="axis"}return cl.Utils.extend(t,cl.Layer),t}(),cl.Background=function(){"use strict";function t(e,r){function o(t){return a.options.fit=t,a}function n(){if(a.image&&a.options.visible){var e,r,o,n=a.options.align.x,s=a.options.align.y,i=a.chart.xAxis.toScreen(a.options.pos.x),c=a.chart.yAxis.toScreen(a.options.pos.y),l=a.chart.xAxis.getMargins(),p=a.chart.yAxis.getMargins();a.options.fitToScreen&&(i=0,c=a.chart.height,l.start=0,l.end=0,p.start=0,p.end=0);var h=a.image.width,u=a.image.height,f=a.chart.width-l.start-l.end,d=a.chart.height-p.start-p.end;switch(a.options.fit){case t.FIT_STRETCH:h=a.chart.width-l.start-l.end,u=a.chart.height-p.start-p.end;break;case t.FIT_ALL:e=f/h,r=d/u,o=Math.min(e,r),h*=o,u*=o,i=l.start+f/2,c=p.end+d/2,n="center",s="center";break;case t.FIT_FILL:e=f/h,r=d/u,o=Math.max(e,r),h*=o,u*=o,i=l.start+f/2,c=p.end+d/2,n="center",s="center"}switch(n){case"left":i-=0;break;case"right":i-=h;break;case"center":i-=h/2}switch(s){case"top":c-=0;break;case"bottom":c-=u;break;case"center":c-=u/2}a.options.fit===t.FIT_FILL&&(a.surface.save(),a.surface.ctx.rect(l.start,p.end,f,d),a.surface.ctx.clip()),a.surface.ctx.drawImage(a.image,Math.floor(i),Math.floor(c),h,u),a.options.fit===t.FIT_FILL&&a.surface.restore(),cl.Layer.prototype.render.call(a)}}function s(t){a.image=new Image,a.isLoaded=!1,a.image.onload=function(){a.isLoaded=!0,a.apply()},a.image.src=t}function i(){a.image=null,cl.Layer.prototype.destroy.call(a)}var a=this;cl.Layer.call(a,e),a.dirtyFlagName="bg",a.image=null,a.isLoaded=!1,cl.Utils.merge(a.options,{url:"",align:{x:"left",y:"bottom"},pos:{x:0,y:0},fit:t.FIT_ALL,fitToScreen:!1,visible:!0}),cl.Utils.merge(a.options,r||{}),a.render=n,a.setFit=o,a.destroy=i,a.setImage=s,a.options.url&&a.setImage(a.options.url)}return cl.Utils.extend(t,cl.Layer),t.FIT_NONE=0,t.FIT_STRETCH=1,t.FIT_ALL=2,t.FIT_FILL=3,t}(),cl.Canvas=function(){"use strict";function t(t,e){function r(t){x.ctx.setLineDash&&x.ctx.setLineDash(t)}function o(){x.ctx.restore()}function n(){x.ctx.save()}function s(t){x.ctx.fillStyle=t}function i(t,e,r){var o=e||cl.Consts.COLOR_BLACK;if(x.ctx.lineWidth=t,x.ctx.strokeStyle=o,!r&&Math.abs(v-t)>.001){v=t;var n=t%2/2;Math.abs(y-n)>.001&&(x.ctx.translate(-y,-y),y=n,x.ctx.translate(y,y))}}function a(t,e,r,o,n,s,i,a,c){var l=(o||cl.Consts.FONT_SIZE)+"px",p=i||cl.Consts.FONT_NAME,h=a||"",u=n||"left",f=s||"top";"center"===f&&(f="middle"),x.ctx.textBaseline=f,x.ctx.textAlign=u,x.ctx.font=h+" "+l+" "+p,void 0!==c?x.ctx.fillText(t,e,r,c):x.ctx.fillText(t,e,r)}function c(t,e,r,o,n){var s,i,a;a=n||Math.PI/10,s=Math.cos(r+a),i=Math.sin(r+a),x.ctx.beginPath(),x.ctx.moveTo(t,e),x.ctx.lineTo(t-s*o,e-i*o),s=Math.cos(r-a),i=Math.sin(r-a),x.ctx.lineTo(t-s*o,e-i*o),x.ctx.lineTo(t,e+1),x.ctx.closePath(),x.ctx.fill()}function l(t,e,r,o,n,s){var i,a,c,l;i=Math.min(t,r),a=Math.min(e,o),c=Math.max(t,r),l=Math.max(e,o),n?(0>c-i-2*n&&(n=(c-i)/2),0>l-a-2*n&&(n=(l-a)/2),s||x.ctx.beginPath(),x.ctx.moveTo(i+n,a),x.ctx.lineTo(c-n,a),x.ctx.arc(c-n,a+n,n,270*cl.Consts.RAD_TO_DEG,360*cl.Consts.RAD_TO_DEG,!1),x.ctx.lineTo(c,l-n),x.ctx.arc(c-n,l-n,n,0*cl.Consts.RAD_TO_DEG,90*cl.Consts.RAD_TO_DEG,!1),x.ctx.lineTo(i+n,l),x.ctx.arc(i+n,l-n,n,90*cl.Consts.RAD_TO_DEG,180*cl.Consts.RAD_TO_DEG,!1),x.ctx.lineTo(i,a+n),x.ctx.arc(i+n,a+n,n,180*cl.Consts.RAD_TO_DEG,270*cl.Consts.RAD_TO_DEG,!1),s||x.ctx.closePath()):x.ctx.rect(i,a,c-i,l-a)}function p(t,e,r,o,n){n||x.ctx.beginPath(),x.ctx.moveTo(t,e),x.ctx.lineTo(r,o),n||x.ctx.stroke()}function h(t){return x.ctx.globalAlpha=t,x}function u(){x.ctx.setTransform(1,0,0,1,0,0)}function f(t,e,r){x.ctx.drawImage(t.el,e||0,r||0)}function d(){x.el.parentNode&&x.el.parentNode.removeChild(x.el),x.ctx=null,x.el=null}function g(){0!==y&&x.ctx.translate(-y,-y),x.ctx.clearRect(-1,-1,x.width+1,x.height+1),0!==y&&x.ctx.translate(y,y)}function m(t,e){x.el.width=t,x.el.height=e}var x=this,v=0,y=0;x.draw=f,x.save=n,x.clear=g,x.resize=m,x.destroy=d,x.restore=o,x.drawText=a,x.drawLine=p,x.drawRect=l,x.setAlpha=h,x.drawArrow=c,x.setLineDash=r,x.setLineStyle=i,x.setFillColor=s,x.resetTransform=u,x.el=document.createElement("canvas"),x.ctx=this.el.getContext("2d"),Object.defineProperties(x,{width:{get:function(){return x.el.width}},height:{get:function(){return x.el.height}}}),x.resize(t,e)}return t}(),cl.Selector=function(){"use strict";function t(e,r){function o(){E.chart.events.callListeners(cl.Event.deselect,null,E.selection),E.selection=[],E.apply()}function n(){return E.selection}function s(){E.options.selection.enabled=!0,E.options.selection.rect.enabled=!0,E.options.selection.multiple=!0}function i(){E.options.selection.multiple=!1}function a(){E.options.draggable=!0}function c(){E.options.draggable=!1}function l(t){k.active||L.active||(t.target&&t.target.props.cursor?E.chart.setCursor(t.target.props.cursor):E.options.hover.showHand&&S(),E.hover=t.target,E.apply())}function p(t){k.active||L.active||((t.target&&t.target.props.cursor||E.options.hover.showHand)&&C(),E.hover=null,E.apply())}function h(t){var e,r,o,n,s,i,a;for(e=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,n=Number.MIN_VALUE,s=0,i=t.length;i>s;s++)a=t[s].getBounds(),a.x<e&&(e=a.x),a.y<r&&(r=a.y),a.x+a.w>o&&(o=a.x+a.w),a.y+a.h>n&&(n=a.y+a.h);return{x:e,y:r,w:o-e,h:n-r}}function u(t){if(E.options.draggable){var e=E.shapeFromPoint(E.chart.events.mouseX,E.chart.events.mouseY);if(e&&(e&&-1===E.selection.indexOf(e)&&(E.selection=[e],E.chart.events.callListeners(cl.Event.select,t,E.selection)),0!==E.selection.length)){var r,o,n=E.selection;for(k.items=[],k.sx=E.chart.xAxis.toAxis(k.sx),k.sy=E.chart.yAxis.toAxis(k.sy),k.bounds=E.getBounds(n),k.bounds.x=Math.floor(k.bounds.x)-10,k.bounds.y=Math.floor(k.bounds.y)-10,k.layer.resize(k.bounds.w+20,k.bounds.h+20),k.layer.resetTransform(),k.layer.clear(),k.layer.ctx.translate(-k.bounds.x,-k.bounds.y),r=0,o=n.length;o>r;r++)n[r].props.draggable&&(k.items.push(n[r]),n[r].render(k.layer),n[r].isAnimating||(E.chart.shapes.updateStatic(),E.chart.shapes.apply()),n[r].isAnimating=!0);for(b(k.layer,k.items),r=0,o=k.items.length;o>r;r++)k.items[r]._isDragged=!0;k.active=!0,E.apply()}}}function f(e){var r,o;if(k.active){
for(r=0,o=k.items.length;o>r;r++)k.items[r].processDrag(e.x-k.sx,e.y-k.sy);E.apply(),E.chart.shapes.apply(),k.sx=e.x,k.sy=e.y}else k.prepared&&E.chart.events.mouseDown&&(Math.abs(k.sx-e.originalEvent.offsetX)>t.DRAG_THRESOLD||Math.abs(k.sy-e.originalEvent.offsetY)>t.DRAG_THRESOLD)&&u(e);L.active&&(L.ex=e.originalEvent.offsetX,L.ey=e.originalEvent.offsetY,E.apply())}function d(t){!k.active&&E.hover?(k.prepared=!0,k.sx=t.originalEvent.offsetX,k.sy=t.originalEvent.offsetY,k.lx=k.sx,k.ly=k.sy):k.prepared=!1,!E.hover&&E.options.selection.enabled&&E.options.selection.rect.enabled&&E.options.selection.multiple&&(L.sx=t.originalEvent.offsetX,L.sy=t.originalEvent.offsetY,L.ex=L.sx,L.ey=L.sy,L.active=!0)}function g(t){var e,r,o;if(L.active){var n=Math.abs(L.ex-L.sx)/2,s=Math.abs(L.ey-L.sy)/2,i=Math.max(L.sx,L.ex)-n,a=Math.max(L.sy,L.ey)-s;o=E.shapesFromRect(i,a,n,s,E.options.selection.rect.inside),0===o.length?E.chart.events.callListeners(cl.Event.deselect,t,E.selection):E.chart.events.callListeners(cl.Event.select,t,o),E.selection=o,L.active=!1,E.apply()}else if(k.active){for(e=0,r=k.items.length;r>e;e++)k.items[e]._isDragged=!1,k.items[e].tween||(k.items[e].isAnimating=!1,E.chart.shapes.updateStatic(),E.chart.shapes.apply());k.items=null,k.active=!1,k.prepared=!1,E.apply()}else if(E.options.selection.enabled){if(E.options.selection.multiple&&E.hover){var c=E.selection.indexOf(E.hover);-1===c?E.selection.push(E.hover):E.selection.splice(c,1)}else E.hover?(E.selection=[E.hover],E.chart.events.callListeners(cl.Event.select,t,E.selection)):(E.chart.events.callListeners(cl.Event.deselect,t,E.selection),E.selection=[]);E.apply()}}function m(t,e,r,o){var n,s,i=[];for(s=E.chart.shapes.count,n=0;s>n;n++)E.chart.shapes.shapes[n].hitTestRect(t,e,r,o)&&i.push(E.chart.shapes.shapes[n]);return i}function x(t,e){var r,o,n=[];for(o=E.chart.shapes.count,r=0;o>r;r++)E.chart.shapes.shapes[r].hitTest(t,e)&&n.push(E.chart.shapes.shapes[r]);return n}function v(t,e){var r=E.chart.selector.shapesFromPoint(t,e);if(0!==r.length){for(var o=Number.MAX_VALUE,n=0,s=0,i=r.length;i>s;s++){var a=r[s].getPixelArea();o>a&&(o=a,n=s)}return r[n]}}function y(){if(E.options.visible){E.surface.clear(),k.active?E.surface.draw(k.layer,k.bounds.x-k.lx+E.chart.events.mouseX,k.bounds.y-k.ly+E.chart.events.mouseY):(b(E.surface,E.selection),E.options.hover.enabled&&!L.active&&(E.chart.shapes.isAnimating&&!k.active&&(E.hover=E.shapeFromPoint(E.chart.events.mouseX,E.chart.events.mouseY)),!E.hover||E.hover.props.hover&&E.hover.props.hover.enabled===!1||(E.hover.props.hover?(E.surface.ctx.strokeStyle=void 0!==E.hover.props.hover.color?E.hover.props.hover.color:E.options.hover.color,E.surface.ctx.lineWidth=void 0!==E.hover.props.hover.border?E.hover.props.hover.border:E.options.hover.width,E.surface.ctx.globalAlpha=void 0!==E.hover.props.hover.opacity?E.hover.props.hover.opacity:E.options.hover.opacity):(E.surface.ctx.strokeStyle=E.options.hover.color,E.surface.ctx.lineWidth=E.options.hover.width,E.surface.ctx.globalAlpha=E.options.hover.opacity),E.surface.ctx.beginPath(),E.hover.renderHover(E.surface,E.options.hover.width/2+(E.hover.props.hover?E.hover.props.hover.offset||0:0)),E.surface.ctx.stroke(),E.surface.ctx.closePath())),L.active&&(E.surface.ctx.strokeStyle=cl.Utils.colorLuminance(E.options.selection.rect.color,-.2),E.surface.ctx.fillStyle=E.options.selection.rect.color,E.surface.ctx.lineWidth=E.options.selection.rect.width,E.surface.ctx.globalAlpha=E.options.selection.rect.opacity,E.surface.ctx.beginPath(),E.surface.ctx.rect(L.sx+.5,L.sy+.5,L.ex-L.sx,L.ey-L.sy),E.surface.ctx.fill(),E.surface.ctx.stroke(),E.surface.ctx.closePath())),cl.Layer.prototype.render.call(E)}}function b(t,e){var r,o;if(E.options.selection.enabled&&0!==E.selection.length){for(t.ctx.strokeStyle=E.options.selection.shape.color,t.ctx.lineWidth=E.options.selection.shape.width,t.ctx.globalAlpha=E.options.selection.shape.opacity,t.ctx.beginPath(),r=0,o=e.length;o>r;r++)e[r].renderHover(t);t.ctx.stroke(),t.ctx.closePath()}}function A(t,e){return k.layer&&k.layer.resize(t,e),cl.Layer.prototype.resize.call(E,t,e),E}function w(){k.layer&&k.layer.destroy(),E.hover=null,E.options=null,k.layer=null,E.selection=[],cl.Layer.prototype.destroy.call(E)}function S(){E.chart.setCursor("pointer")}function C(){E.chart.setCursor()}var E=this;cl.Layer.call(E,e),E.selection=[],E.hover=null,E.dirtyFlagName="sel",cl.Utils.merge(E.options,{draggable:!1,hover:{enabled:!0,width:2,color:cl.Consts.COLOR_RED,opacity:1,showHand:!0},selection:{enabled:!0,multiple:!1,shape:{width:1,color:cl.Consts.COLOR_BLUE,opacity:1},rect:{enabled:!0,width:1,color:cl.Consts.COLOR_LIGHTBLUE,opacity:.3}}}),cl.Utils.merge(E.options,r||{});var k={active:!1,prepared:!1,items:[],bounds:null,sx:0,sy:0,lx:0,ly:0,layer:new cl.Canvas(E.chart.width,E.chart.height)},L={active:!1,sx:0,sy:0,ex:0,ey:0};E.resize=A,E.render=y,E.destroy=w,E.deselect=o,E.getBounds=h,E.enableDrag=a,E.disableDrag=c,E.getSelection=n,E.shapesFromRect=m,E.shapeFromPoint=v,E.shapesFromPoint=x,E.enableMultiselect=s,E.disableMultiselect=i,E.chart.addEventListener(cl.Event.shapeOver,l),E.chart.addEventListener(cl.Event.shapeOut,p),E.chart.addEventListener(cl.Event.mouseDown,d),E.chart.addEventListener(cl.Event.mouseUp,g),E.chart.addEventListener(cl.Event.mouseMove,f)}return cl.Utils.extend(t,cl.Layer),t.DRAG_THRESOLD=3,t}(),cl.Shape=function(){"use strict";function t(t,e){var r=this;if(!t)throw new Error(cl.Lang.get("errShapeNoParam","parent"));if(r.parent=t,r.type="base",r.isAnimating=!1,r.animProps=null,r._isDragged=!1,r.tween=null,r.props={owner:r,id:void 0,x:0,y:0,color:cl.Consts.COLOR_RED,borderColor:null,border:1,opacity:.3,lineDash:null,links:[],draggable:!0,track:{enabled:!1,width:1,color:cl.Consts.COLOR_GREEN,opacity:.4,startSize:2,endSize:4},hover:null},cl.Utils.merge(r.props,e),r.props.color&&(r.props.color=cl.Color.fromString(r.props.color)),r.props.borderColor?r.props.borderColor=cl.Color.fromString(r.props.borderColor):r.props.borderColor=cl.Utils.colorLuminance(r.props.color,-.2),void 0===r.props.id)throw new Error(cl.Lang.get("errShapeNoParam","id"))}return t.prototype.setHoverStyle=function(t){cl.Utils.merge(this.props.hover,t)},t.prototype.getHoverStyle=function(){return cl.Utils.merge({},this.props.hover)},t.prototype.getPixelArea=function(){},t.prototype.getCenterX=function(){return this.props.x},t.prototype.getCenterY=function(){return this.props.y},t.prototype.processDrag=function(t,e){this.props.x+=t,this.props.y+=e},t.prototype.getBounds=function(){},t.prototype.hitTestRect=function(t,e,r,o){},t.prototype.hitTest=function(t,e){},t.prototype.link=function(t){var e=this,r=!1;t.forEach(function(t){if(-1===e.props.links.indexOf(t)){var o=e.parent.get(t);if(!o||o.props.id===e.props.id)return;e.props.links.push(t),o.isAnimating||(r=!0)}}),r&&(e.parent.updateStatic(),e.parent.apply())},t.prototype.unlink=function(t){var e=this,r=e.props.links.length;t.forEach(function(t){var r=e.props.links.indexOf(t);-1!==r&&e.props.links.splice(r,1)}),r===e.props.links.length||e.isAnimating||(e.parent.updateStatic(),e.parent.apply())},t.prototype.onAnimationUpdate=function(){},t.prototype.startAnimation=function(t){var e=this;if(this.animProps){this.isAnimating||(this.parent.animCount++,this.parent.updateStatic()),this.isAnimating=!0,this.tween&&(this.tween.stop(),this.tween=null);var r,o;this.animProps.color&&(r=cl.Color.toRGB(this.props.color),o=cl.Color.toRGB(this.animProps.color),this.props.color_r=r.r,this.props.color_g=r.g,this.props.color_b=r.b,this.animProps.color_r=o.r,this.animProps.color_g=o.g,this.animProps.color_b=o.b,delete this.animProps.color),this.animProps.color2&&(r=cl.Color.toRGB(this.props.color2||this.props.color),o=cl.Color.toRGB(this.animProps.color2),this.props.color2_r=r.r,this.props.color2_g=r.g,this.props.color2_b=r.b,this.animProps.color2_r=o.r,this.animProps.color2_g=o.g,this.animProps.color2_b=o.b,delete this.animProps.color2),this.tween=new TWEEN.Tween(this.props).to(this.animProps,t||cl.ShapeManager.ANIMATION_SPEED).easing(TWEEN.Easing.Quadratic.Out).delay(cl.ShapeManager.ANIMATION_DELAY).onUpdate(function(){e.onAnimationUpdate.call(this);var t,r,o;void 0!==this.color_r&&(t=Math.floor(this.color_r),r=Math.floor(this.color_g),o=Math.floor(this.color_b),0>t&&(t=0),0>r&&(r=0),0>o&&(o=0),t>255&&(t=255),r>255&&(r=255),o>255&&(o=255),this.color=cl.Color.toHex(t,r,o)),void 0!==this.color2_r&&(t=Math.floor(this.color2_r),r=Math.floor(this.color2_g),o=Math.floor(this.color2_b),0>t&&(t=0),0>r&&(r=0),0>o&&(o=0),t>255&&(t=255),r>255&&(r=255),o>255&&(o=255),this.color2=cl.Color.toHex(t,r,o))}).onComplete(function(){this.owner.stopAnimation(!0)}).start()}},t.prototype.getId=function(){return this.props.id},t.prototype.setProps=function(t,e,r){if(this._isDragged)return!1;var o=this.calcAnimProps(t);return o?(this.isAnimating||e&&this.parent.animCount>=cl.ShapeManager.MAX_ANIMATED_ITEMS&&(e=!1),e?this.startAnimation(r):(cl.Utils.merge(this.props,this.animProps,["id","owner"]),this.isAnimating||this.parent.updateStatic()),this.parent.apply(),!0):!1},t.prototype.getProps=function(){return cl.Utils.merge({},this.props,["owner"])},t.prototype.calcAnimProps=function(t){return this._isDragged?!1:(this.animProps.owner=this,void 0!==t.x&&t.x!==this.props.x&&(this.animProps.x=t.x,this.animProps.changed=!0),void 0!==t.y&&t.y!==this.props.y&&(this.animProps.y=t.y,this.animProps.changed=!0),void 0!==t.color&&t.color!==this.props.color&&(this.animProps.color=t.color,this.animProps.changed=!0),void 0!==t.border&&t.border!==this.props.border&&(this.animProps.border=t.border,this.animProps.changed=!0),void 0!==t.opacity&&t.opacity!==this.props.opacity&&(this.animProps.opacity=t.opacity,this.animProps.changed=!0),this.animProps.changed)},t.prototype.apply=function(){this.parent.apply()},t.prototype.render=function(t){},t.prototype.renderHover=function(t,e){},t.prototype.stopAnimation=function(t){this.tween&&this.animProps&&cl.Utils.merge(this.props,this.animProps,["id","owner"]),this.tween&&!t&&this.tween.stop(),this.tween=null,this.animProps=null,this.isAnimating&&this.parent.animCount--},t.prototype.destroy=function(){this.stopAnimation(),this.props.owner=null,this.props=null,this.parent=null},t}(),cl.ShapeManager=function(){"use strict";function t(e,r){function o(){y.options.centers.visible=!1,y.updateStatic(),y.apply(),y.chart.redraw()}function n(){y.options.centers.visible=!0,y.updateStatic(),y.apply(),y.chart.redraw()}function s(){return 0!==A}function i(t,e){var r,o,n,s;if(y.options.centers.visible){for(t.setAlpha(y.options.centers.opacity),t.setLineStyle(y.options.centers.width,y.options.centers.color),t.ctx.beginPath(),r=0,o=y.shapes.length;o>r;r++)e&&y.shapes[r].isAnimating||(e||y.shapes[r].isAnimating)&&(n=y.chart.toScreenX(y.shapes[r].getCenterX()),s=y.chart.toScreenY(y.shapes[r].getCenterY()),t.ctx.moveTo(n+y.options.centers.size,s),t.ctx.arc(n,s,y.options.centers.size,0,cl.Consts.TWO_PI,!1));t.ctx.stroke(),t.ctx.closePath()}}function a(t,r){var o,n,s,i;for(t.ctx.lineWidth=y.options.links.width,t.ctx.strokeStyle=y.options.links.color,t.setAlpha(y.options.links.opacity),t.ctx.beginPath(),o=0,s=y.shapes.length;s>o;o++){var a=!y.shapes[o].isAnimating;if((a||!r)&&(i=y.shapes[o].props.links.length,0!==i)){var c=e.xAxis.toScreen(y.shapes[o].getCenterX()),l=e.yAxis.toScreen(y.shapes[o].getCenterY());for(n=0;i>n;n++)if(y.shapes[o].props.links[n]!=y.shapes[o].props.id){var p=y.get(y.shapes[o].props.links[n]);if(p&&(!p.isAnimating||!r)&&(r||!a||p.isAnimating)){var h=y.chart.xAxis.toScreen(p.props.x),u=y.chart.yAxis.toScreen(p.props.y);t.ctx.moveTo(c,l),t.ctx.lineTo(h,u)}}}}t.ctx.stroke(),t.ctx.closePath()}function c(t,e){return t.props.zIndex<e.props.zIndex?-1:1}function l(){var t,e,r=y.shapes;if(y.options.zIndexUsage===!0&&(r=y.shapes.sort(c)),b){console.log("Static redrawn"),b=!1,y["static"].resetTransform(),y["static"].clear();var o=0;for(t=0,e=r.length;e>t;t++)r[t].isAnimating||(r[t].render(y["static"],y.chart),o++);a(y["static"],!0),i(y["static"],!0),console.log("objects in static:",o)}for(y.surface.resetTransform(),y.surface.clear(),y.surface.setAlpha(1),y["static"].setAlpha(1),y.surface.draw(y["static"],0,0),t=0,e=r.length;e>t;t++)r[t].isAnimating&&r[t].render(y.surface,y.chart);for(a(y.surface,!1),i(y.surface,!1),t=0,e=r.length;e>t;t++)if(r[t].isAnimating&&r[t].props.track.enabled&&r[t].animProps){var n,s,l,p;n=y.chart.xAxis.toScreen(r[t].props.x),s=y.chart.yAxis.toScreen(r[t].props.y),l=y.chart.xAxis.toScreen(r[t].animProps.x),p=y.chart.yAxis.toScreen(r[t].animProps.y),y.surface.ctx.strokeStyle=r[t].props.track.color,y.surface.ctx.lineWidth=r[t].props.track.width,y.surface.ctx.beginPath(),y.surface.ctx.moveTo(n,s),y.surface.ctx.lineTo(l,p),y.surface.ctx.stroke(),0!==r[t].props.track.startSize&&0!==r[t].props.track.endSize&&(y.surface.ctx.fillStyle=r[t].props.track.color,0!==r[t].props.track.startSize&&y.surface.ctx.arc(n,s,r[t].props.track.startSize,0,cl.Consts.TWO_PI,!1),0!==r[t].props.track.endSize&&y.surface.ctx.arc(l,p,r[t].props.track.endSize,0,cl.Consts.TWO_PI,!1),y.surface.ctx.fill())}}function p(e,r,o,n){var s,i,a,c=o||!1;if(!r)throw new Error(cl.Lang.get("errNoShapeClass"));a=e instanceof Array?e:[e];var l=[];for(s=0,i=a.length;i>s;s++){if(void 0===a[s].id)throw new Error(cl.Lang.get("errShapeNoParam","id"));var p=y.get(a[s].id);if(p){if(p.constructor!==r)throw new Error(cl.Lang.get("errShapeType"));var h=p.setProps(a[s],c,n);h&&(l.push(p),p.isAnimating||y.updateStatic())}else{var u=new r(y,a[s]);y.shapes.push(u),w[a[s].id]=u,y.updateStatic()}}if(0!==l.length&&c){for(i=l.length,i>t.MAX_ANIMATED_ITEMS&&(i=t.MAX_ANIMATED_ITEMS),s=0;i>s;s++)l[s].animProps&&l[s].startAnimation(n);for(s=t.MAX_ANIMATED_ITEMS,i=l.length;i>s;s++)cl.Utils.merge(l[s].props,l[s].animProps)}else y.updateStatic();l=null,y.apply()}function h(){var t,e,r=!1,o=[];for(t=0,e=y.shapes.length;e>t;t++)y.shapes[t].isAnimating&&null===y.shapes[t].tween&&(y.shapes[t].isAnimating=!1,r=!0,o.push(y.shapes[t]));for(t=0,e=o.length;e>t;t++){var n=y.shapes.indexOf(o[t]);y.shapes.splice(n,1)}for(t=0,e=o.length;e>t;t++)y.shapes.push(o[t]);y.updateStatic(),y.apply()}function u(t){return w[t]?w[t]:void 0}function f(t){if(t){var e=y.shapes.indexOf(t);-1!==e&&y.shapes[e]&&(delete w[t.props.id],y.shapes.splice(e,1),y.apply(),t.destroy())}}function d(){for(;0!==y.count;)y.remove(y.shapes[0])}function g(t){switch(typeof t){case"object":f(t);break;default:f(u(t))}}function m(){var t,e;for(t=0,e=y.shapes.length;e>t;t++)y.shapes[t].destroy();y.shapes=null,y["static"].destroy(),w=null,cl.Layer.prototype.destroy.call(y)}function x(t,e){return b=!0,y["static"].resize(t,e),cl.Layer.prototype.resize.call(y,t,e),y}function v(){b=!0}var y=this;cl.Layer.call(y,e);var b=!1,A=0,w={};y.add=p,y.get=u,y.clear=d,y.remove=g,y.render=l,y.resize=x,y.destroy=m,y.updateStatic=v,y.showCenters=n,y.hideCenters=o,y.chart=e,y.shapes=[],y.dirtyFlagName="items",y["static"]=new cl.Canvas(e.width,e.height),y.options={zIndexUsage:!1,links:{width:1,color:cl.Consts.COLOR_BLACK,opacity:.5},centers:{visible:!1,width:1,size:3,opacity:.3,color:cl.Consts.COLOR_BLACK}},cl.Utils.merge(y.options,r||{}),Object.defineProperties(y,{animCount:{get:function(){return A},set:function(t){A=t,0===A&&h()}},isAnimating:{get:s},count:{get:function(){return y.shapes.length}}})}return cl.Utils.extend(t,cl.Layer),t.MAX_ANIMATED_ITEMS=500,t.ANIMATION_DELAY=100,t.ANIMATION_SPEED=400,t}(),cl.Bubble=function(){"use strict";function t(t,e){function r(){return Math.PI*p.props.size*p.props.size}function o(){return{x:p.parent.chart.xAxis.toScreen(p.props.x)-p.props.size,y:p.parent.chart.yAxis.toScreen(p.props.y)-p.props.size,w:2*p.props.size,h:2*p.props.size}}function n(t,e,r,o){var n=p.parent.chart.xAxis.toScreen(p.props.x),s=p.parent.chart.yAxis.toScreen(p.props.y),i=Math.abs(n-t),a=Math.abs(s-e),c=p.props.size;if(i>r+c)return!1;if(a>o+c)return!1;if(r>=i)return!0;if(o>=a)return!0;var l=(i-r)*(i-r)+(a-o)*(a-o);return c*c>=l}function s(t,e){var r=p.parent.chart.xAxis.toScreen(p.props.x),o=p.parent.chart.yAxis.toScreen(p.props.y);return(t-r)*(t-r)+(e-o)*(e-o)<=p.props.size*p.props.size}function i(t){return p.animProps={},void 0!==t.size&&t.size!==p.props.size&&(p.animProps.size=t.size,p.animProps.changed=!0),cl.Shape.prototype.calcAnimProps.call(p,t)||p.animProps.changed}function a(t){if(!p._isDragged){var e=p.parent.chart;p.props.size>=0&&(t.setAlpha(p.props.opacity),t.setFillColor(p.props.color),p.props.border&&t.setLineStyle(p.props.border,p.props.borderColor,!0),p.props.lineDash&&t.setLineDash(p.props.lineDash),t.ctx.beginPath(),t.ctx.arc(e.xAxis.toScreen(p.props.x),e.yAxis.toScreen(p.props.y),p.props.size,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),p.props.border&&t.ctx.stroke(),t.ctx.closePath(),p.props.lineDash&&t.setLineDash([])),cl.Shape.prototype.render.call(p,t)}}function c(t,e){if(!p._isDragged){e=(e||0)+(p.props.border||0)/2;var r=p.parent.chart;if(p.props.size>=0){var o=r.xAxis.toScreen(p.props.x),n=r.yAxis.toScreen(p.props.y);t.ctx.moveTo(o+p.props.size+e,n),t.ctx.arc(o,n,p.props.size+e,0,cl.Consts.TWO_PI,!1)}cl.Shape.prototype.renderHover.call(p,t)}}function l(){cl.Shape.prototype.destroy.call(p)}var p=this;cl.Shape.call(p,t,e),p.type="bubble",p.parent=t,p.render=a,p.destroy=l,p.hitTest=s,p.getBounds=o,p.hitTestRect=n,p.renderHover=c,p.getPixelArea=r,p.calcAnimProps=i;if(void 0===p.props.size)throw new Error(cl.Lang.get("errShapeNoParam","size"))}return cl.Utils.extend(t,cl.Shape),t}(),cl.Centroid=function(){"use strict";function t(t,e){var r=this;cl.Bubble.call(r,t,e),r.type="centroid"}return cl.Utils.extend(t,cl.Bubble),t}(),cl.Rect=function(){"use strict";function t(t,e){function r(){f.getBounds();return f.w*f.h}function o(){var t,e;return f.props.x<f.props.x2?(t=f.props.x,e=f.props.x2):(t=f.props.x2,e=f.props.x),t+Math.abs(e-t)/2}function n(){var t,e;return f.props.y<f.props.y2?(t=f.props.y,e=f.props.y2):(t=f.props.y2,e=f.props.y),t+Math.abs(e-t)/2}function s(t,e){f.props.x2+=t,f.props.y2+=e,f.constructor.prototype.processDrag.call(f,t,e)}function i(){var t,e,r,o,n,s,i,a;return t=f.parent.chart.xAxis.toScreen(f.props.x),e=f.parent.chart.yAxis.toScreen(f.props.y),r=f.parent.chart.xAxis.toScreen(f.props.x2),o=f.parent.chart.yAxis.toScreen(f.props.y2),n=Math.min(t,r),s=Math.min(e,o),i=Math.max(t,r),a=Math.max(e,o),{x:n,y:s,w:i-n,h:a-s}}function a(t,e,r,o){var n,s,i,a,c,l,p,h;n=f.parent.chart.xAxis.toScreen(f.props.x),s=f.parent.chart.yAxis.toScreen(f.props.y),i=f.parent.chart.xAxis.toScreen(f.props.x2),a=f.parent.chart.yAxis.toScreen(f.props.y2),c=Math.min(n,i),l=Math.min(s,a),p=Math.max(n,i),h=Math.max(s,a);var u=(p-c)/2,d=(h-l)/2,g=c+u,m=l+d,x=Math.abs(g-t),v=Math.abs(m-e);return u+r>=x&&d+o>=v}function c(t,e){var r,o,n,s,i,a,c,l;return r=f.parent.chart.xAxis.toScreen(f.props.x),o=f.parent.chart.yAxis.toScreen(f.props.y),n=f.parent.chart.xAxis.toScreen(f.props.x2),s=f.parent.chart.yAxis.toScreen(f.props.y2),i=Math.min(r,n),a=Math.min(o,s),c=Math.max(r,n),l=Math.max(o,s),t>=i&&c>=t&&e>=a&&l>=e}function l(t){return f.animProps={},void 0!==t.x2&&t.x2!==f.props.x2&&(f.animProps.x2=t.x2,f.animProps.changed=!0),void 0!==t.y2&&t.y2!==f.props.y2&&(f.animProps.y2=t.y2,f.animProps.changed=!0),void 0!==t.borderRadius&&t.borderRadius!==f.props.borderRadius&&(f.animProps.borderRadius=t.borderRadius,f.animProps.changed=!0),void 0!==t.color2&&t.color2!==f.props.color2&&(f.animProps.color2=t.color2,f.animProps.changed=!0),cl.Shape.prototype.calcAnimProps.call(f,t)||f.animProps.changed}function p(t){if(!f._isDragged){var e,r,o,n,s=f.parent.chart;if(e=s.xAxis.toScreen(f.props.x),r=s.yAxis.toScreen(f.props.y),o=s.xAxis.toScreen(f.props.x2),n=s.yAxis.toScreen(f.props.y2),t.setAlpha(f.props.opacity),f.props.color2&&f.props.color!==f.props.color2){var i,a,c,l;i=Math.min(e,o),a=Math.min(r,n),c=Math.max(e,o),l=Math.max(r,n);var p=t.ctx.createLinearGradient(i,a,c,l);p.addColorStop(0,f.props.color),p.addColorStop(1,f.props.color2),t.ctx.fillStyle=p}else t.setFillColor(f.props.color);f.props.border&&t.setLineStyle(f.props.border,f.props.borderColor),f.props.lineDash&&t.setLineDash(f.props.lineDash),t.ctx.beginPath(),t.drawRect(e,r,o,n,f.props.borderRadius),t.ctx.fill(),f.props.border&&t.ctx.stroke(),t.ctx.closePath(),f.props.lineDash&&t.setLineDash([]),cl.Shape.prototype.render.call(f,t)}}function h(t,e){if(!f._isDragged){e=(e||0)+(f.props.border||0)/2;var r,o,n,s,i=f.parent.chart;r=i.xAxis.toScreen(f.props.x),o=i.yAxis.toScreen(f.props.y),n=i.xAxis.toScreen(f.props.x2),s=i.yAxis.toScreen(f.props.y2),t.drawRect(r,o,n,s,f.props.borderRadius,!0),cl.Shape.prototype.renderHover.call(f,t)}}function u(){cl.Shape.prototype.destroy.call(f)}var f=this;cl.Shape.call(f,t,e),f.type="rect",f.parent=t,f.render=p,f.destroy=u,f.hitTest=c,f.getBounds=i,f.getCenterX=o,f.getCenterY=n,f.hitTestRect=a,f.renderHover=h,f.processDrag=s,f.getPixelArea=r,f.calcAnimProps=l;var d=e||{};if(d.borderRadius=d.borderRadius||0,f.props.color2&&(f.props.color2=cl.Color.fromString(f.props.color2)),void 0===f.props.x2)throw new Error(cl.Lang.get("errShapeNoParam","x2"));if(void 0===f.props.y2)throw new Error(cl.Lang.get("errShapeNoParam","y2"))}return cl.Utils.extend(t,cl.Shape),t}(),cl.Line=function(){"use strict";function t(e,r){function o(){return Math.sqrt(cl.Utils.distSq(m.props.x,m.props.y,m.props.x2,m.props.y2))}function n(){var t,e,r,o=this;void 0!==o.pointColor_r&&(t=Math.floor(o.pointColor_r),e=Math.floor(o.pointColor_g),r=Math.floor(o.pointColor_b),0>t&&(t=0),0>e&&(e=0),0>r&&(r=0),t>255&&(t=255),e>255&&(e=255),r>255&&(r=255),o.pointColor=cl.Color.toHex(t,e,r)),void 0!==o.pointColor2_r&&(t=Math.floor(o.pointColor2_r),e=Math.floor(o.pointColor2_g),r=Math.floor(o.pointColor2_b),0>t&&(t=0),0>e&&(e=0),0>r&&(r=0),t>255&&(t=255),e>255&&(e=255),r>255&&(r=255),o.pointColor2=cl.Color.toHex(t,e,r))}function s(t){var e,r,o=this;o.animProps.pointColor&&(e=cl.Color.toRGB(o.props.pointColor||o.props.color),r=cl.Color.toRGB(o.animProps.pointColor),o.props.pointColor_r=e.r,o.props.pointColor_g=e.g,o.props.pointColor_b=e.b,o.animProps.pointColor_r=r.r,o.animProps.pointColor_g=r.g,o.animProps.pointColor_b=r.b,delete o.animProps.pointColor),o.animProps.pointColor2&&(e=cl.Color.toRGB(o.props.pointColor2||o.props.pointColor||o.props.color),r=cl.Color.toRGB(o.animProps.pointColor2),o.props.pointColor2_r=e.r,o.props.pointColor2_g=e.g,o.props.pointColor2_b=e.b,o.animProps.pointColor2_r=r.r,o.animProps.pointColor2_g=r.g,o.animProps.pointColor2_b=r.b,delete o.animProps.pointColor2),m.constructor.prototype.startAnimation.call(m,t)}function i(){var t,e;return m.props.x<m.props.x2?(t=m.props.x,e=m.props.x2):(t=m.props.x2,e=m.props.x),t+Math.abs(e-t)/2}function a(){var t,e;return m.props.y<m.props.y2?(t=m.props.y,e=m.props.y2):(t=m.props.y2,e=m.props.y),t+Math.abs(e-t)/2}function c(t,e){m.props.x2+=t,m.props.y2+=e,m.constructor.prototype.processDrag.call(m,t,e)}function l(){var t,e,r,o,n,s,i,a;return t=m.parent.chart.xAxis.toScreen(m.props.x),e=m.parent.chart.yAxis.toScreen(m.props.y),r=m.parent.chart.xAxis.toScreen(m.props.x2),o=m.parent.chart.yAxis.toScreen(m.props.y2),n=Math.min(t,r),s=Math.min(e,o),i=Math.max(t,r),a=Math.max(e,o),{x:n,y:s,w:i-n,h:a-s}}function p(t,e,r,o){var n,s,i,a;return n=m.parent.chart.xAxis.toScreen(m.props.x),s=m.parent.chart.yAxis.toScreen(m.props.y),i=m.parent.chart.xAxis.toScreen(m.props.x2),a=m.parent.chart.yAxis.toScreen(m.props.y2),cl.Utils.lineRectIntersect(t-r,e-o,t+r,e+o,n,s,i,a)}function h(e,r){var o,n,s,i;return o=m.parent.chart.xAxis.toScreen(m.props.x),n=m.parent.chart.yAxis.toScreen(m.props.y),s=m.parent.chart.xAxis.toScreen(m.props.x2),i=m.parent.chart.yAxis.toScreen(m.props.y2),cl.Utils.distToSegmentSquared(e,r,o,n,s,i)<t.HOVER_THRESOLD}function u(t){return m.animProps={},void 0!==t.x2&&t.x2!==m.props.x2&&(m.animProps.x2=t.x2,m.animProps.changed=!0),void 0!==t.y2&&t.y2!==m.props.y2&&(m.animProps.y2=t.y2,m.animProps.changed=!0),void 0!==t.size&&t.size!==m.props.size&&(m.animProps.size=t.size,m.animProps.changed=!0),void 0!==t.size2&&t.size2!==m.props.size2&&(m.animProps.size2=t.size2,m.animProps.changed=!0),void 0!==t.pointColor&&t.pointColor!==m.props.pointColor&&(m.animProps.pointColor=t.pointColor,m.animProps.changed=!0),void 0!==t.pointColor2&&t.pointColor2!==m.props.pointColor2&&(m.animProps.pointColor2=t.pointColor2,m.animProps.changed=!0),cl.Shape.prototype.calcAnimProps.call(m,t)||m.animProps.changed}function f(t){if(!m._isDragged){var e,r,o,n,s=m.parent.chart;e=s.xAxis.toScreen(m.props.x),r=s.yAxis.toScreen(m.props.y),o=s.xAxis.toScreen(m.props.x2),n=s.yAxis.toScreen(m.props.y2),t.setAlpha(m.props.opacity),t.setLineStyle(m.props.border,m.props.color),m.props.lineDash&&t.setLineDash(m.props.lineDash),t.drawLine(e,r,o,n),m.props.size&&(t.ctx.beginPath(),t.setFillColor(m.props.pointColor||m.props.color),t.ctx.moveTo(e,r),t.ctx.arc(e,r,m.props.size,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),t.ctx.closePath()),m.props.size2&&(t.ctx.beginPath(),t.setFillColor(m.props.pointColor2||m.props.pointColor||m.props.color),t.ctx.moveTo(o,n),t.ctx.arc(o,n,m.props.size2,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),t.ctx.closePath()),m.props.lineDash&&t.setLineDash([]),cl.Shape.prototype.render.call(m,t)}}function d(t,e){if(!m._isDragged){var r,o,n,s,i=m.parent.chart;r=i.xAxis.toScreen(m.props.x),o=i.yAxis.toScreen(m.props.y),n=i.xAxis.toScreen(m.props.x2),s=i.yAxis.toScreen(m.props.y2),t.drawLine(r,o,n,s,!0),m.props.size&&(t.ctx.moveTo(r+m.props.size+(e||0),o),t.ctx.arc(r,o,m.props.size+(e||0),0,cl.Consts.TWO_PI,!1)),m.props.size2&&(t.ctx.moveTo(n+m.props.size2+(e||0),s),t.ctx.arc(n,s,m.props.size2+(e||0),0,cl.Consts.TWO_PI,!1)),cl.Shape.prototype.renderHover.call(m,t)}}function g(){cl.Shape.prototype.destroy.call(m)}var m=this;cl.Shape.call(m,e,r),m.type="line",m.parent=e,m.render=f,m.destroy=g,m.hitTest=h,m.getBounds=l,m.getCenterX=i,m.getCenterY=a,m.hitTestRect=p,m.renderHover=d,m.processDrag=c,m.getPixelArea=o,m.calcAnimProps=u,m.startAnimation=s,m.onAnimationUpdate=n;var x=r||{};if(x.borderRadius=x.borderRadius||0,m.props.pointColor&&(m.props.pointColor=cl.Color.fromString(m.props.pointColor)),m.props.pointColor2&&(m.props.pointColor2=cl.Color.fromString(m.props.pointColor2)),void 0===m.props.x2)throw new Error(cl.Lang.get("errShapeNoParam","x2"));if(void 0===m.props.y2)throw new Error(cl.Lang.get("errShapeNoParam","y2"))}return cl.Utils.extend(t,cl.Shape),t.HOVER_THRESOLD=25,t}(),cl.Chart=function(){"use strict";function t(t){function e(t){t?w.screen.el.style.cursor=t:w.screen.el.style.cursor="default"}function r(t){return w.xAxis.toAxis(t)}function o(t){return w.yAxis.toAxis(t)}function n(t){return w.yAxis.toScreen(t)}function s(t){return w.xAxis.toScreen(t)}function i(t,e,r){w.shapes.add(t,cl.Bubble,e,r)}function a(t,e,r){w.shapes.add(t,cl.Rect,e,r)}function c(t,e,r){w.shapes.add(t,cl.Line,e,r)}function l(){if(w.options.element){w.options.element.parentNode;w.options.preloader.classList.add("cl-preloader-hidden")}}function p(){if(w.options.element&&w.options.element.parentNode){var t=w.preloader,e=w.options.element.parentNode;t.classList.remove("hidden"),t.classList.remove("cl-preloader-hidden"),t.classList.add("cl-preloader");var r="",o=Math.floor(w.element.offsetLeft+w.width/2-t.offsetWidth/2),n=Math.floor(w.element.offsetTop+w.height/2-t.offsetHeight/2);r="left: "+o+"px; top: "+n+"px",r+=";"+t.getAttribute("style"),t.setAttribute("style",r),e.appendChild(t)}}function h(t){C[t]=!0}function u(){return w.background}function f(){S=!1,C.all=!1;for(var t in C)C.hasOwnProperty(t)&&(C[t]=!1)}function d(){if(C.all)return!0;for(var t in C)if(C.hasOwnProperty(t)&&C[t])return!0;return!1}function g(){S||(requestAnimFrame(x),S=!0)}function m(t){w.background.setImage(t)}function x(t){if(TWEEN.update(t),w.screen){var e,r;for(w.shapes.isAnimating&&(w.shapes.apply(),w.selector.apply()),C.axis&&(C.shapes=!0,w.shapes.updateStatic()),e=0,r=w.layers.length;r>e;e++)(C.all||C[w.layers[e].dirtyFlagName])&&w.layers[e].render();for(w.screen.clear(),e=0,r=w.layers.length;r>e;e++)w.screen.draw(w.layers[e].surface);f(),w.shapes.isAnimating&&!S&&(S=!0,requestAnimFrame(x))}}function v(t,e){var r,o;for(r=0,o=w.layers.length;o>r;r++)w.layers[r].resize(t,e);w.screen.resize(t,e),C.all=!0,w.redraw()}function y(t,e){w.events.addEventListener(t,e)}function b(t,e){w.events.removeEventListener(t,e)}function A(){var t,e;for(t=0,e=w.layers.length;e>t;t++)w.layers[t].destroy();w.screen.destroy(),w.layers=[],w.screen=null,w.background=null,w.element=null}var w=this;w.options=t||{},w.xAxis=null,w.yAxis=null,w.preloader=w.options.preloader,w.element=w.options.element,Object.defineProperties(w,{isDirty:{get:d},width:{get:function(){return w.screen.width}},height:{get:function(){return w.screen.height}}});var S=!1,C={all:!1};if(w.redraw=g,w.resize=v,w.destroy=A,w.toAxisX=r,w.toAxisY=o,w.addRects=a,w.addLines=c,w.setCursor=e,w.toScreenX=s,w.toScreenY=n,w.addBubbles=i,w.setDirtyFlag=h,w.showPreloader=p,w.hidePreloader=l,w.getBackground=u,w.setBackground=m,w.addEventListener=y,w.removeEventListener=b,!w.element)throw cl.Lang.get("errNoElements");w.screen=new cl.Canvas(w.options.width||w.element.offsetWidth,w.options.height||w.element.offsetHeight),w.screen.el.classList.add("cl-chart"),w.events=new cl.EventManager(w),w.background=new cl.Background(w,w.options.background||{}),w.axis=new cl.AxisManager(w),w.shapes=new cl.ShapeManager(w,w.options.shapes),w.selector=new cl.Selector(w,w.options.selector),w.layers=[w.background,w.axis,w.shapes,w.selector],w.xAxis=w.axis.add(cl.Utils.merge({type:"x"},w.options.xAxis||{})),w.yAxis=w.axis.add(cl.Utils.merge({type:"y"},w.options.yAxis||{})),w.element.appendChild(w.screen.el),w.redraw()}return t}();