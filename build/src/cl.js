void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var t=[];return{REVISION:"14",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)},update:function(e){if(0===t.length)return!1;var r=0;for(e=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r<t.length;)t[r].update(e)?r++:t.splice(r,1);return!0}}}();TWEEN.Tween=function(t){var e=t,r={},o={},n={},s=1e3,i=0,a=!1,c=!1,l=!1,p=0,h=null,u=TWEEN.Easing.Linear.None,f=TWEEN.Interpolation.Linear,d=[],g=null,m=!1,x=null,v=null,y=null;for(var b in t)r[b]=parseFloat(t[b],10);this.to=function(t,e){return void 0!==e&&(s=e),o=t,this},this.start=function(t){TWEEN.add(this),c=!0,m=!1,h=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=p;for(var s in o){if(o[s]instanceof Array){if(0===o[s].length)continue;o[s]=[e[s]].concat(o[s])}r[s]=e[s],r[s]instanceof Array==0&&(r[s]*=1),n[s]=r[s]||0}return this},this.stop=function(){return c?(TWEEN.remove(this),c=!1,null!==y&&y.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=d.length;e>t;t++)d[t].stop()},this.delay=function(t){return p=t,this},this.repeat=function(t){return i=t,this},this.yoyo=function(t){return a=t,this},this.easing=function(t){return u=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return d=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return x=t,this},this.onComplete=function(t){return v=t,this},this.onStop=function(t){return y=t,this},this.update=function(t){var c;if(h>t)return!0;m===!1&&(null!==g&&g.call(e),m=!0);var y=(t-h)/s;y=y>1?1:y;var b=u(y);for(c in o){var A=r[c]||0,w=o[c];w instanceof Array?e[c]=f(w,b):("string"==typeof w&&(w=A+parseFloat(w,10)),"number"==typeof w&&(e[c]=A+(w-A)*b))}if(null!==x&&x.call(e,b),1==y){if(i>0){isFinite(i)&&i--;for(c in n){if("string"==typeof o[c]&&(n[c]=n[c]+parseFloat(o[c],10)),a){var C=n[c];n[c]=o[c],o[c]=C}r[c]=n[c]}return a&&(l=!l),h=t+p,!0}null!==v&&v.call(e);for(var S=0,_=d.length;_>S;S++)d[S].start(t);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o)))},Out:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/o)+1)},InOut:function(t){var e,r=.1,o=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=o/4):e=o*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/o)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var r=t.length-1,o=r*e,n=Math.floor(o),s=TWEEN.Interpolation.Utils.Linear;return 0>e?s(t[0],t[1],o):e>1?s(t[r],t[r-1],r-o):s(t[n],t[n+1>r?r:n+1],o-n)},Bezier:function(t,e){var r,o=0,n=t.length-1,s=Math.pow,i=TWEEN.Interpolation.Utils.Bernstein;for(r=0;n>=r;r++)o+=s(1-e,n-r)*s(e,r)*t[r]*i(n,r);return o},CatmullRom:function(t,e){var r=t.length-1,o=r*e,n=Math.floor(o),s=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(0>e&&(n=Math.floor(o=r*(1+e))),s(t[(n-1+r)%r],t[n],t[(n+1)%r],t[(n+2)%r],o-n)):0>e?t[0]-(s(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[r]-(s(t[r],t[r],t[r-1],t[r-1],o-r)-t[r]):s(t[n?n-1:0],t[n],t[n+1>r?r:n+1],t[n+2>r?r:n+2],o-n)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=TWEEN.Interpolation.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var r,o=1;if(t[e])return t[e];for(r=e;r>1;r--)o*=r;return t[e]=o}}(),CatmullRom:function(t,e,r,o,n){var s=.5*(r-t),i=.5*(o-e),a=n*n,c=n*a;return(2*e-2*r+s+i)*c+(-3*e+3*r-2*s-i)*a+s*n+e}}},"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN),function(t){var e="1.0.6 beta!";e!=="{{Package.Json.Version}}".toLowerCase()&&console.log("%c ˖•● ChartLibrary v."+e+" ●•˖ ","background: #44A; color: #FFF"),window.cl={version:"1.0.6 beta!"}}(window),function(t,e){"use strict";function r(){e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()}r.prototype.extend=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype},r.prototype.merge=function(t,e,r){if(!e)return t;if(e.constructor===Array){t=[];for(var o=0;o<e.length;o++)"object"==typeof e[o]?t[o]=this.merge({},e[o]):t[o]=e[o];return t}for(var n in e)if(e.hasOwnProperty(n))if(null!==e[n])if(void 0!==e[n]){if(!r||-1===r.indexOf(n))try{e[n].constructor==Object?t[n]=this.merge(t[n]||{},e[n]):e[n].constructor==Array?t[n]=this.merge(void 0,e[n],r):t[n]=e[n]}catch(s){console.warn("Something go wrong during object merge",t,"to",e,". Property",n),t[n]=e[n]}}else t[n]=void 0;else t[n]=null;return t},r.prototype.colorLuminance=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var r,o,n="#";for(o=0;3>o;o++)r=parseInt(t.substr(2*o,2),16),r=Math.round(Math.min(Math.max(0,r+r*e),255)).toString(16),n+=("00"+r).substr(r.length);return n},r.prototype.distSq=function(t,e,r,o){return(t-r)*(t-r)+(e-o)*(e-o)},r.prototype.distToSegmentSquared=function(t,e,r,o,n,s){var i=this.distSq(r,o,n,s);if(0===i)return this.distSq(t,e,r,o);var a=((t-r)*(n-r)+(e-o)*(s-o))/i;return 0>a?this.distSq(t,e,r,o):a>1?this.distSq(t,e,n,s):this.distSq(t,e,r+a*(n-r),o+a*(s-o))},r.prototype.lineRectIntersect=function(t,e,r,o,n,s,i,a){var c=n,l=i;if(n>i&&(c=i,l=n),l>r&&(l=r),t>c&&(c=t),c>l)return!1;var p=s,h=a,u=i-n;if(Math.abs(u)>1e-7){var f=(a-s)/u,d=s-f*n;p=f*c+d,h=f*l+d}if(p>h){var g=h;h=p,p=g}return h>o&&(h=o),e>p&&(p=e),h>=p},t.Utils=new r}(cl,window),function(t){"use strict";function e(){}var r="en";e.prototype.get=function(t,e){if(!this.strings[r]||!this.strings[r][t])return t;var o=this.strings[r][t]||t;if(e instanceof Array)for(var n=0;n<e.length;n++)o=o.replace("%"+(n+1).toString(),e[n]);else o=o.replace("%1",e);return o},e.prototype.strings={en:{errNoElements:"No element specified in options",errAxisHaveNoChart:"Trying to access axis with no parent chart",errDelBaseAxis:"Can not delete base '%1' axis",errShapeNoParam:"Can not create shape without '%1' parameter",errUnknownEvent:"Unknown event '%1'",errNoShapeClass:"Shape class is not specified",errShapeType:"Can not add shape, because same shape with different type already exists"}},t.Lang=new e}(cl),function(t){"use strict";var e={COLOR_BLACK:"#000000",COLOR_WHITE:"#FFFFFF",COLOR_GRAY:"#AAAAAA",COLOR_RED:"#FF0000",COLOR_GREEN:"#00FF00",COLOR_BLUE:"#0000FF",COLOR_LIGHTBLUE:"#AAAAFF",FONT_SIZE:14,FONT_NAME:"Arial",TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,RAD_TO_DEG:Math.PI/180};t.Consts=e}(cl),function(t){"use strict";function e(){var t=this;t._colors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},t._defs=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*\.?\d*)\)$/,example:["rgba(123, 234, 45, 255)","rgba(255,234,245,255)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w)(\w)(\w)$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}]}e.prototype.fromString=function(t){var e=this;return e._colors[t]?"#"+e._colors[t]:t},e.prototype.toHex=function(t,e,r){var o,n,s;return o=t.toString(16),n=e.toString(16),s=r.toString(16),1==o.length&&(o="0"+o),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),"#"+o+n+s},e.prototype.toRGB=function(t){var e=this;"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,"").toLowerCase(),e._colors[t]&&(t=e._colors[t]);for(var r,o,n,s=0;s<e._defs.length;s++){var i=e._defs[s].re,a=e._defs[s].process,c=i.exec(t);if(c){var l=a(c);r=l[0],o=l[1],n=l[2]}}return r=0>r||isNaN(r)?0:r>255?255:r,o=0>o||isNaN(o)?0:o>255?255:o,n=0>n||isNaN(n)?0:n>255?255:n,{r:r,g:o,b:n}},t.Color=new e}(cl),cl.Event=function(){"use strict";function t(){this.x=null,this.y=null,this.target=null,this.originalEvent=null,this.type=null}var e={click:"click",doubleClick:"dblclick",mouseMove:"mousemove",mouseDown:"mousedown",mouseUp:"mouseup",shapeOver:"shapeover",shapeOut:"shapeout",select:"select",deselect:"deselect",dragStart:"dragstart",dragEnd:"dragend"};return cl.Utils.merge(t,e),t}(),cl.EventManager=function(){"use strict";function t(t){function e(t,e){if(!d[t])throw new Error(cl.Lang.get("errUnknownEvent",t));-1===d[t].indexOf(e)&&d[t].push(e)}function r(t,e){if(!d[t])throw new Error(cl.Lang.get("errUnknownEvent",t));var r=d[t].indexOf(e);-1!==r&&d[t].splice(r,1)}function o(t){if(u.mouseX=t.offsetX,u.mouseY=t.offsetY,p(cl.Event.shapeOver)||p(cl.Event.shapeOut)){var e=u.chart.selector.shapeFromPoint(u.mouseX,u.mouseY);e?g!==e&&a(cl.Event.shapeOver,t,e):null!==g&&a(cl.Event.shapeOut,t,g),g=e}a(cl.Event.mouseMove,t)}function n(t){u.mouseDown=!0,a(cl.Event.mouseDown,t)}function s(t){(u.mouseDown||t.currentTarget!==document)&&(u.mouseDown=!1,a(cl.Event.mouseUp,t),t.stopPropagation())}function i(t){a(cl.Event.doubleClick,t,u.chart.selector.shapeFromPoint(t.offsetX,t.offsetY))}function a(t,e,r,o,n){if(u.hasListener(t)){var s,i;s=void 0===o?u.chart.xAxis.toAxis(e?e.offsetX:void 0):o,i=void 0===n?u.chart.yAxis.toAxis(e?e.offsetY:void 0):n,f.x=s,f.y=i,f.target=r,f.originalEvent=e;for(var a=0,c=d[t].length;c>a;a++)d[t][a](f)}}function c(){var t=u.chart.screen.el;t.addEventListener(cl.Event.mouseMove,o),t.addEventListener(cl.Event.mouseDown,n),t.addEventListener(cl.Event.mouseUp,s),t.addEventListener(cl.Event.doubleClick,i),document.addEventListener(cl.Event.mouseUp,s)}function l(){var t=u.chart.screen.el;t.removeEventListener(cl.Event.mouseMove,o),t.removeEventListener(cl.Event.mouseDown,n),t.removeEventListener(cl.Event.mouseUp,s),t.removeEventListener(cl.Event.doubleClick,i),document.removeEventListener(cl.Event.mouseUp,s)}function p(t){return 0!==d[t].length}function h(){u.chart=null,f=null,d=null,l()}var u=this;u.chart=t,u.mouseX=0,u.mouseY=0,u.mouseDown=!1,u.destroy=h,u.hasListener=p,u.addEventListener=e,u.removeEventListener=r,u.callListeners=a;var f=new cl.Event,d={},g=null;for(var m in cl.Event)d[cl.Event[m]]=[];c()}return t}(),cl.Layer=function(){"use strict";function t(t){var e=this;e.chart=t,e.options={visible:!0},e.surface=new cl.Canvas(t.width,t.height),e.dirtyFlagName="",Object.defineProperties(e,{visible:{get:function(){return e.options.visible},set:function(t){e.options.visible=t}}})}return t.prototype.show=function(){return this.options&&(this.options.visible=!0),this},t.prototype.hide=function(){return this.options&&(this.options.visible=!1),this},t.prototype.apply=function(){this.chart&&(this.chart.setDirtyFlag(this.dirtyFlagName),this.chart.redraw())},t.prototype._render=function(){},t.prototype.resize=function(t,e){return this.surface.resize(t,e),this},t.prototype.destroy=function(){this.chart=null,this.surface.destroy(),this.surface=null},t}(),cl.Axis=function(){"use strict";function t(t,e){function r(){return R.options.ticks.big.interval}function o(t){return R.options.ticks.big.interval=t,R}function n(){return R.options.ticks.small.interval}function s(t){return R.options.ticks.small.interval=t,R}function i(){return R.options.visible=!1,R}function a(){return R.options.visible=!0,R}function c(){return R.options.title.style}function l(t){return R.options.title.style=t,R}function p(){return R.options.title.color}function h(t){return R.options.title.color=t,R}function u(){return R.options.title.font}function f(t){return R.options.title.font=t,R}function d(){return R.options.title.size}function g(t){return R.options.title.size=t,R}function m(){return R.options.title.align}function x(t){return R.options.title.align=t,R}function v(t){return R.options.style.color=t,R}function y(){return R.options.style.color}function b(){return{start:R.options.margin.start,end:R.options.margin.end}}function A(t,e){return R.options.margin.start=t,R.options.margin.end=e,R}function w(t){return R.options.offset=t,R}function C(){return R.options.offset}function S(){return R.options.max}function _(){return R.options.min}function E(t){return R.options.max=t,R}function P(t){return R.options.min=t,R}function L(t){return R.options.name=t,R}function k(){return R.options.name}function T(t){if(R.options&&R.options.visible){var e,r,o,n,s=R.options,i="y"==R.options.type,a=(s.margin.start,s.margin.end,R.chart.width,R.chart.height,s.ticks.small.interval.toString()),c=a.indexOf("."),l=0;-1!==c&&(l=a.length-c-1),t.resetTransform(),t.setLineStyle(s.style.lineWidth,s.style.color),t.setFillColor(s.style.color),i?(n=R.options.offset,t.ctx.translate(R.chart.xAxis.toScreen(n),0),t.ctx.rotate(cl.Consts.HALF_PI)):(n=R.options.offset,t.ctx.translate(0,R.chart.yAxis.toScreen(n))),t.save(),0!==s.style.lineDash.length&&t.setLineDash(s.style.lineDash),t.drawLine(R.toScreen(s.min),0,R.toScreen(s.max),0),t.restore(),0!==s.style.arrowSize&&t.drawArrow(R.toScreen(s.max),0,i?Math.PI:0,s.style.arrowSize);var p=0,h=0,u=!1;switch(s.ticks.big.align){case"right":case"top":p=-s.ticks.big.size;break;case"center":case"middle":p=-s.ticks.big.size/2;break;case"left":case"bottom":p=0}switch(s.ticks.small.align){case"right":case"top":h=-s.ticks.small.size;break;case"center":case"middle":h=-s.ticks.small.size/2;break;case"left":case"bottom":h=0}var f,d,g;for("x"===s.type?(f=R.chart.yAxis.toScreen(R.chart.yAxis.getMin()),d=R.chart.yAxis.toScreen(R.chart.yAxis.getMax()),g=R.chart.yAxis.toScreen(n)):(f=-R.chart.xAxis.toScreen(R.chart.xAxis.getMin()),d=-R.chart.xAxis.toScreen(R.chart.xAxis.getMax()),g=-R.chart.xAxis.toScreen(n)),e=s.min,r=s.max-s.min;e<=s.max;)o=Math.floor(R.toScreen(e)),u=e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0)),u?(e+s.ticks.big.interval<=s.max||s.ticks.big.last)&&(e!=s.min||s.ticks.big.first)&&(0!==s.grid.big.width&&(t.setLineStyle(s.grid.big.width,s.grid.big.color),t.setAlpha(s.grid.big.opacity),0!==s.grid.big.dash.length&&t.setLineDash(s.grid.big.dash),t.drawLine(o,f-g,o,d-g)),0!==s.ticks.size&&(t.setLineStyle(s.style.lineWidth,s.ticks.big.color),t.setAlpha(s.ticks.big.opacity),t.setLineDash([]),"dot"===s.ticks.big.type?(t.setFillColor(s.ticks.big.color),t.ctx.beginPath(),t.ctx.arc(o,p+s.ticks.big.size/2,s.ticks.big.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(o,p,o,p+s.ticks.big.size))):(e+s.ticks.big.interval<=s.max||s.ticks.small.last)&&(e!=s.min+s.ticks.small.interval||s.ticks.small.first)&&(0!==s.grid.small.width&&(t.setLineStyle(s.grid.small.width,s.grid.small.color),t.setAlpha(s.grid.small.opacity),0!==s.grid.small.dash.length&&t.setLineDash(s.grid.small.dash),t.drawLine(o,f-g,o,d-g)),0!==s.ticks.sizeSmall&&(t.setLineStyle(s.style.lineWidth,s.ticks.small.color),t.setAlpha(s.ticks.small.opacity),t.setLineDash([]),"dot"===s.ticks.small.type?(t.setFillColor(s.ticks.small.color),t.ctx.beginPath(),t.ctx.arc(o,h+s.ticks.small.size/2,s.ticks.small.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(o,h,o,h+s.ticks.small.size))),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(l));if(t.ctx.globalAlpha=1,t.setLineDash([]),0!==s.title.size){var m=s.title.align;switch("bottom"===m&&(m="left"),"top"===m&&(m="right"),m){case"left":o=Math.floor(R.toScreen(s.min));break;case"right":o=Math.floor(R.toScreen(s.max));break;case"center":o=Math.floor(R.toScreen(s.min+(s.max-s.min)/2));break;default:o=0}"y"===s.type&&(t.ctx.translate(o,s.title.size+2*(s.title.offset+s.ticks.big.size+s.labels.big.size)),t.ctx.rotate(Math.PI)),t.setFillColor(s.title.color),t.drawText(s.name,"y"===s.type?0:o,s.title.offset+s.ticks.big.size+s.labels.big.size,s.title.size,m,"top",s.title.font,s.title.style),"y"===s.type&&(t.ctx.rotate(-Math.PI),t.ctx.translate(-o,-(s.title.size+2*(s.title.offset+s.ticks.big.size+s.labels.big.size))))}var x=s.labels.big.align,v=s.labels.small.align;if("y"===s.type){switch("bottom"===x?x="right":"top"===x?x="left":"middle"===x&&(x="center"),"bottom"===v?v="right":"top"===v?v="left":"middle"===v&&(v="center"),x){case"center":case"middle":p=0;break;case"right":p=s.ticks.big.size;break;case"left":p=-s.ticks.big.size}switch(v){case"center":case"middle":h=0;break;case"right":h=s.ticks.small.size;break;case"left":h=-s.ticks.small.size}}else{switch("bottom"===x?x="top":"top"===x&&(x="bottom"),"left"===x?x="right":"right"===x&&(x="left"),"bottom"===v?v="top":"top"===v&&(v="bottom"),"left"===v?v="right":"right"===v&&(v="left"),x){case"center":case"middle":p=0;break;case"top":case"left":p=s.ticks.big.size}switch(v){case"center":case"middle":h=0;break;case"top":case"left":h=s.ticks.small.size}}for(e=s.min,r=s.max-s.min;e<=s.max;)o=Math.floor(R.toScreen(e)),e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0))?0!==s.labels.big.size&&(e+s.ticks.big.interval<=s.max||s.ticks.big.last)&&(e!=s.min||s.ticks.big.first)&&(o+=("y"===s.type?-1:1)*s.labels.big.margin,t.setFillColor(s.labels.big.color),t.setAlpha(s.labels.big.opacity),"y"===s.type?(t.ctx.translate(o,p),t.ctx.rotate(-cl.Consts.HALF_PI),t.drawText(s.labels.big.before+e.toFixed(l)+s.labels.big.after,0,0,s.labels.big.size,x,"center",s.labels.big.font,s.labels.big.style),t.ctx.rotate(cl.Consts.HALF_PI),t.ctx.translate(-o,-p)):t.drawText(s.labels.big.before+e.toFixed(l)+s.labels.big.after,o,p,s.labels.big.size,"center",x,s.labels.big.font,s.labels.big.style)):0!==s.labels.small.size&&(e+s.ticks.big.interval<=s.max||s.ticks.small.last)&&(e!=s.min+s.ticks.small.interval||s.ticks.small.first)&&(o+=("y"===s.type?-1:1)*s.labels.small.margin,t.setFillColor(s.labels.small.color),t.setAlpha(s.labels.small.opacity),"y"===s.type?(t.ctx.translate(o,h),t.ctx.rotate(-cl.Consts.HALF_PI),t.drawText(s.labels.small.before+e.toFixed(l)+s.labels.small.after,0,0,s.labels.small.size,v,"center",s.labels.small.font,s.labels.small.style),t.ctx.rotate(cl.Consts.HALF_PI),t.ctx.translate(-o,-h)):t.drawText(s.labels.small.before+e.toFixed(l)+s.labels.small.after,o,h,s.labels.small.size,"center",v,s.labels.small.font,s.labels.small.style)),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(l));t.setAlpha(1),t.resetTransform()}}function M(t){if(!R.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=R.chart.width;return"x"===R.options.type?R.options.min+(t-R.options.margin.start)/(e-R.options.margin.start-R.options.margin.end)*(R.options.max-R.options.min):(e=R.chart.height,t=e-t,R.options.min+(t-R.options.margin.start)/(e-R.options.margin.start-R.options.margin.end)*(R.options.max-R.options.min))}function O(t){if(!R.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=R.chart.width;return"x"===R.options.type?R.options.margin.start+(t-R.options.min)/(R.options.max-R.options.min)*(e-R.options.margin.start-R.options.margin.end):(e=R.chart.height,R.chart.height-(R.options.margin.start+(t-R.options.min)/(R.options.max-R.options.min)*(e-R.options.margin.start-R.options.margin.end)))}function I(){return R.parent.apply(),R}function z(t){return R.options.style.lineWidth=t,R}function D(){return R.options.style.lineWidth}function F(){R.options=null,R.chart=null}var R=this;R.parent=t,R.chart=t.chart,R.show=a,R.hide=i,R.apply=I,R.toAxis=M,R.setMin=P,R.setMax=E,R.getMax=S,R.getMin=_,R._render=T,R.setName=L,R.getName=k,R.destroy=F,R.setColor=v,R.getColor=y,R.toScreen=O,R.getOffset=C,R.setOffset=w,R.setMargins=A,R.getMargins=b,R.setLineWidth=z,R.getLineWidth=D,R.setTitleSize=g,R.getTitleSize=d,R.setTitleFont=f,R.getTitleFont=u,R.setTitleAlign=x,R.getTitleAlign=m,R.setTitleColor=h,R.getTitleColor=p,R.setTitleStyle=l,R.getTitleStyle=c,R.setTickInterval=o,R.getTickInterval=r,R.getTickIntervalSmall=n,R.setTickIntervalSmall=s,R.options={name:"",type:"x",min:0,max:100,offset:0,ticks:{big:{interval:10,size:8,align:"center",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line",first:!0,last:!0},small:{interval:5,size:4,align:"bottom",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line",first:!0,last:!0}},margin:{start:20,end:20},style:{lineWidth:2,color:cl.Consts.COLOR_GRAY,arrowSize:12,lineDash:[]},title:{size:14,align:"center",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_BLACK,style:"",offset:0},labels:{big:{size:10,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1,before:"",after:"",margin:0},small:{size:8,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1,before:"",after:"",margin:0}},grid:{big:{width:1,dash:[3,3],color:"#BEBEBE",opacity:.5},small:{width:1,dash:[10,10],color:"#EFEFEF",opacity:.5}},visible:!0},cl.Utils.merge(R.options,e||{}),e&&(e.min||e.max)&&(e.ticks&&e.ticks.big&&e.ticks.big.interval||(R.options.ticks.big.interval=parseFloat(((R.options.max-R.options.min)/10).toFixed(4))),e.ticks&&e.ticks.small&&e.ticks.small.interval||(R.options.ticks.small.interval=parseFloat(((R.options.max-R.options.min)/20).toFixed(4))))}return t}(),cl.AxisManager=function(){"use strict";function t(t){function e(){var t,e;for(i.surface.resetTransform(),i.surface.clear(),t=0,e=i.items.length;e>t;t++)i.items[t]._render(i.surface)}function r(t){var e=new cl.Axis(i,t||{});return i.items.push(e),i.apply(),e}function o(t){var e,r;if("string"!=typeof t)return i.items[t];for(e=0,r=i.items.length;r>e;e++)if(i.items[e].getName()===t)return i.items[e]}function n(t){if(t){if(t===i.chart.xAxis||t===i.chart.yAxis)throw cl.Lang.get("errDelBaseAxis",t.options.type);var e=i.items.indexOf(t);-1!==e&&i.items[e]&&(i.items.splice(e,1),i.apply(),t.destroy())}}function s(t){switch(typeof t){case"object":n(t);break;default:n(o(t))}}var i=this;cl.Layer.call(i,t),i.add=r,i.get=o,i.remove=s,i._render=e,i.chart=t,i.items=[],i.dirtyFlagName="axis",Object.defineProperties(i,{count:{get:function(){return i.items.length}}})}return cl.Utils.extend(t,cl.Layer),t}(),cl.Background=function(){"use strict";function t(e,r){function o(t){return a.options.fit=t,a}function n(){if(a.image&&a.options.visible){var e,r,o,n=a.options.align.x,s=a.options.align.y,i=a.chart.xAxis.toScreen(a.options.pos.x),c=a.chart.yAxis.toScreen(a.options.pos.y),l=a.chart.xAxis.getMargins(),p=a.chart.yAxis.getMargins();a.options.fitToScreen&&(i=0,c=a.chart.height,l.start=0,l.end=0,p.start=0,p.end=0);var h=a.image.width,u=a.image.height,f=a.chart.width-l.start-l.end,d=a.chart.height-p.start-p.end;switch(a.options.fit){case t.FIT_STRETCH:h=a.chart.width-l.start-l.end,u=a.chart.height-p.start-p.end;break;case t.FIT_ALL:e=f/h,r=d/u,o=Math.min(e,r),h*=o,u*=o,i=l.start+f/2,c=p.end+d/2,n="center",s="center";break;case t.FIT_FILL:e=f/h,r=d/u,o=Math.max(e,r),h*=o,u*=o,i=l.start+f/2,c=p.end+d/2,n="center",s="center"}switch(n){case"left":i-=0;break;case"right":i-=h;break;case"center":i-=h/2}switch(s){case"top":c-=0;break;case"bottom":c-=u;break;case"center":c-=u/2}a.options.fit===t.FIT_FILL&&(a.surface.save(),a.surface.ctx.rect(l.start,p.end,f,d),a.surface.ctx.clip()),a.surface.ctx.drawImage(a.image,Math.floor(i),Math.floor(c),h,u),a.options.fit===t.FIT_FILL&&a.surface.restore(),a.constructor.superclass._render.call(a)}}function s(t){a.image=new Image,a.isLoaded=!1,a.image.onload=function(){a.isLoaded=!0,a.apply()},a.image.src=t}function i(){a.image=null,a.constructor.superclass.destroy.call(a)}var a=this;cl.Layer.call(a,e),a.dirtyFlagName="bg",a.image=null,a.isLoaded=!1,cl.Utils.merge(a.options,{url:"",align:{x:"left",y:"bottom"},pos:{x:0,y:0},fit:t.FIT_ALL,fitToScreen:!1,visible:!0}),cl.Utils.merge(a.options,r||{}),a._render=n,a.setFit=o,a.destroy=i,a.setImage=s,a.options.url&&a.setImage(a.options.url)}return cl.Utils.extend(t,cl.Layer),t.FIT_NONE=0,t.FIT_STRETCH=1,t.FIT_ALL=2,t.FIT_FILL=3,t}(),cl.Canvas=function(){"use strict";function t(t,e){function r(t){y.ctx.setLineDash&&y.ctx.setLineDash(t)}function o(){y.ctx.restore()}function n(){y.ctx.save()}function s(t){y.ctx.fillStyle=t}function i(){b=null,0!==A&&y.ctx.translate(-A,-A),A=0}function a(t,e,r){var o=e||cl.Consts.COLOR_BLACK;if(y.ctx.lineWidth=t,y.ctx.strokeStyle=o,!r&&Math.abs(b-t)>.001){b=t;var n=t%2/2;Math.abs(A-n)>.001&&(y.ctx.translate(-A,-A),A=n,y.ctx.translate(A,A))}}function c(t,e,r,o,n,s,i,a,c){var l=(o||cl.Consts.FONT_SIZE)+"px",p=i||cl.Consts.FONT_NAME,h=a||"",u=n||"left",f=s||"top";"center"===f&&(f="middle"),y.ctx.textBaseline=f,y.ctx.textAlign=u,y.ctx.font=h+" "+l+" "+p,void 0!==c?y.ctx.fillText(t,e,r,c):y.ctx.fillText(t,e,r)}function l(t,e,r,o,n){var s,i,a;a=n||Math.PI/10,s=Math.cos(r+a),i=Math.sin(r+a),y.ctx.beginPath(),y.ctx.moveTo(t,e),y.ctx.lineTo(t-s*o,e-i*o),s=Math.cos(r-a),i=Math.sin(r-a),y.ctx.lineTo(t-s*o,e-i*o),y.ctx.lineTo(t,e+1),y.ctx.closePath(),y.ctx.fill()}function p(t,e,r,o,n,s){var i,a,c,l;i=Math.min(t,r),a=Math.min(e,o),c=Math.max(t,r),l=Math.max(e,o),n?(0>c-i-2*n&&(n=(c-i)/2),0>l-a-2*n&&(n=(l-a)/2),s||y.ctx.beginPath(),y.ctx.moveTo(i+n,a),y.ctx.lineTo(c-n,a),y.ctx.arc(c-n,a+n,n,270*cl.Consts.RAD_TO_DEG,360*cl.Consts.RAD_TO_DEG,!1),y.ctx.lineTo(c,l-n),y.ctx.arc(c-n,l-n,n,0*cl.Consts.RAD_TO_DEG,90*cl.Consts.RAD_TO_DEG,!1),y.ctx.lineTo(i+n,l),y.ctx.arc(i+n,l-n,n,90*cl.Consts.RAD_TO_DEG,180*cl.Consts.RAD_TO_DEG,!1),y.ctx.lineTo(i,a+n),y.ctx.arc(i+n,a+n,n,180*cl.Consts.RAD_TO_DEG,270*cl.Consts.RAD_TO_DEG,!1),s||y.ctx.closePath()):y.ctx.rect(i,a,c-i,l-a)}function h(t,e,r){y.ctx.arc(t,e,r,0,cl.Consts.TWO_PI,!1)}function u(t,e,r,o,n){n||y.ctx.beginPath(),y.ctx.moveTo(t,e),y.ctx.lineTo(r,o),n||y.ctx.stroke()}function f(t){return y.ctx.globalAlpha=t,y}function d(){y.ctx.setTransform(1,0,0,1,0,0)}function g(t,e,r){y.ctx.drawImage(t.el,e||0,r||0)}function m(){y.el.parentNode&&y.el.parentNode.removeChild(y.el),y.ctx=null,y.el=null}function x(){0!==A&&y.ctx.translate(-A,-A),y.ctx.clearRect(-1,-1,y.width+1,y.height+1),0!==A&&y.ctx.translate(A,A)}function v(t,e){y.el.width=t,y.el.height=e}var y=this,b=0,A=0;y.draw=g,y.save=n,y.clear=x,y.resize=v,y.destroy=m,y.restore=o,y.drawText=c,y.drawLine=u,y.drawRect=p,y.setAlpha=f,y.drawArrow=l,y.drawCircle=h,y.setLineDash=r,y.setLineStyle=a,y.setFillColor=s,y.resetTransform=d,y.restoreLineFix=i,y.el=document.createElement("canvas"),y.ctx=this.el.getContext("2d"),Object.defineProperties(y,{width:{get:function(){return y.el.width}},height:{get:function(){return y.el.height}}}),y.resize(t,e)}return t}(),cl.Selector=function(){"use strict";function t(e,r){function o(){0!==_.selection.length&&(_.chart.events.callListeners(cl.Event.deselect,null,_.selection),_.selection=[],_.apply())}function n(){return _.selection}function s(){_.options.selection.enabled=!0,_.options.selection.rect.enabled=!0,_.options.selection.multiple=!0}function i(){_.options.selection.multiple=!1}function a(){_.options.draggable=!0}function c(){_.options.draggable=!1}function l(t){E.active||P.active||(t.target&&t.target.props.cursor?_.chart.setCursor(t.target.props.cursor):_.options.hover.showHand&&C(),_.hover=t.target,_.apply())}function p(t){E.active||P.active||((t.target&&t.target.props.cursor||_.options.hover.showHand)&&S(),_.hover=null,_.apply())}function h(t){var e,r,o,n,s,i,a;for(e=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,n=Number.MIN_VALUE,s=0,i=t.length;i>s;s++)a=t[s].getBounds(),a.x<e&&(e=a.x),a.y<r&&(r=a.y),a.x+a.w>o&&(o=a.x+a.w),a.y+a.h>n&&(n=a.y+a.h);return{x:e,y:r,w:o-e,h:n-r}}function u(t){if(_.options.draggable){
var e=_.shapeFromPoint(_.chart.events.mouseX,_.chart.events.mouseY);if(e&&(e&&-1===_.selection.indexOf(e)&&(_.selection=[e],_.chart.events.callListeners(cl.Event.select,t.originalEvent,_.selection)),0!==_.selection.length)){var r,o,n=_.selection;for(E.items=[],E.sx=_.chart.xAxis.toAxis(E.sx),E.sy=_.chart.yAxis.toAxis(E.sy),E.bounds=_.getBounds(n),E.bounds.x=Math.floor(E.bounds.x)-10,E.bounds.y=Math.floor(E.bounds.y)-10,E.layer.resize(E.bounds.w+20,E.bounds.h+20),E.layer.resetTransform(),E.layer.clear(),E.layer.ctx.translate(-E.bounds.x,-E.bounds.y),r=0,o=n.length;o>r;r++)n[r].props.draggable&&(E.items.push(n[r]),n[r]._render(E.layer),n[r].isAnimating||(_.chart.shapes.updateStatic(),_.chart.shapes.apply()),n[r].isAnimating=!0);for(b(E.layer,E.items),r=0,o=E.items.length;o>r;r++)E.items[r]._isDragged=!0;E.active=!0,_.apply(),_.chart.events.callListeners(cl.Event.dragStart,t.originalEvent,E.items)}}}function f(e){var r,o;if(E.active){for(r=0,o=E.items.length;o>r;r++)E.items[r].processDrag(e.x-E.sx,e.y-E.sy);_.apply(),_.chart.shapes.apply(),E.sx=e.x,E.sy=e.y}else E.prepared&&_.chart.events.mouseDown&&(Math.abs(E.sx-e.originalEvent.offsetX)>t.DRAG_THRESOLD||Math.abs(E.sy-e.originalEvent.offsetY)>t.DRAG_THRESOLD)&&u(e);P.active&&(P.ex=e.originalEvent.offsetX,P.ey=e.originalEvent.offsetY,_.apply())}function d(t){L.down=_.hover,!E.active&&_.hover?(E.prepared=!0,E.sx=t.originalEvent.offsetX,E.sy=t.originalEvent.offsetY,E.lx=E.sx,E.ly=E.sy):E.prepared=!1,!_.hover&&_.options.selection.enabled&&_.options.selection.rect.enabled&&_.options.selection.multiple&&(P.sx=t.originalEvent.offsetX,P.sy=t.originalEvent.offsetY,P.ex=P.sx,P.ey=P.sy,P.active=!0)}function g(t){var e,r,o;L.up=_.hover;var n=L.down&&L.up&&L.down===L.up;if(P.active){var s=Math.abs(P.ex-P.sx)/2,i=Math.abs(P.ey-P.sy)/2,a=Math.max(P.sx,P.ex)-s,c=Math.max(P.sy,P.ey)-i;o=_.shapesFromRect(a,c,s,i),0===o.length?_.chart.events.callListeners(cl.Event.deselect,t,_.selection):_.chart.events.callListeners(cl.Event.select,t,o),_.selection=o,P.active=!1,_.apply()}else if(E.active){for(e=0,r=E.items.length;r>e;e++)E.items[e]._isDragged=!1,E.items[e].tween||(E.items[e].isAnimating=!1,_.chart.shapes.updateStatic(),_.chart.shapes.apply());_.chart.events.callListeners(cl.Event.dragEnd,t.originalEvent,E.items),E.items=null,E.active=!1,E.prepared=!1,_.apply()}else{if(_.options.selection.enabled){if(_.options.selection.multiple&&_.hover){var l=_.selection.indexOf(_.hover);-1===l?_.selection.push(_.hover):_.selection.splice(l,1)}else _.hover&&n?1===_.selection.length&&_.selection[0]===_.hover?(_.chart.events.callListeners(cl.Event.deselect,t,_.selection),_.selection=[]):(_.selection=[_.hover],_.chart.events.callListeners(cl.Event.select,t,_.selection)):(_.chart.events.callListeners(cl.Event.deselect,t,_.selection),_.selection=[]);_.apply()}n?_.chart.events.callListeners(cl.Event.click,t.originalEvent,L.up):null===L.down&&null===L.up&&_.chart.events.callListeners(cl.Event.click,t.originalEvent,null)}}function m(t,e,r,o){var n,s,i=[];for(s=_.chart.shapes.count,n=0;s>n;n++)_.chart.shapes.items[n].hitTestRect(t,e,r,o)&&i.push(_.chart.shapes.items[n]);return i}function x(t,e){var r,o,n=[];for(o=_.chart.shapes.count,r=0;o>r;r++)_.chart.shapes.items[r].hitTest(t,e)&&n.push(_.chart.shapes.items[r]);return n}function v(t,e){var r=_.chart.selector.shapesFromPoint(t,e);if(0!==r.length){for(var o=Number.MAX_VALUE,n=0,s=0,i=r.length;i>s;s++){var a=r[s].getPixelArea();o>a&&(o=a,n=s)}return r[n]}}function y(){if(_.options.visible){_.surface.clear(),E.active?_.surface.draw(E.layer,E.bounds.x-E.lx+_.chart.events.mouseX,E.bounds.y-E.ly+_.chart.events.mouseY):(b(_.surface,_.selection),_.options.hover.enabled&&!P.active&&(_.chart.shapes.isAnimating&&!E.active&&(_.hover=_.shapeFromPoint(_.chart.events.mouseX,_.chart.events.mouseY)),!_.hover||_.hover.props.hover&&_.hover.props.hover.enabled===!1||(_.hover.props.lineDash&&0!==_.hover.props.lineDash.length&&_.surface.setLineDash(_.hover.props.lineDash),_.hover.props.hover?(_.surface.ctx.strokeStyle=void 0!==_.hover.props.hover.color?_.hover.props.hover.color:_.options.hover.color,_.surface.ctx.lineWidth=void 0!==_.hover.props.hover.border?_.hover.props.hover.border:_.options.hover.width,_.surface.ctx.globalAlpha=void 0!==_.hover.props.hover.opacity?_.hover.props.hover.opacity:_.options.hover.opacity):(_.surface.ctx.strokeStyle=_.options.hover.color,_.surface.ctx.lineWidth=_.options.hover.width,_.surface.ctx.globalAlpha=_.options.hover.opacity),_.surface.ctx.beginPath(),_.hover.renderHover(_.surface,_.options.hover.width/2+(_.hover.props.hover?_.hover.props.hover.offset||0:0)),_.surface.ctx.stroke(),_.surface.ctx.closePath(),_.hover.props.lineDash&&0!==_.hover.props.lineDash.length&&_.surface.setLineDash([]))),P.active&&(_.surface.ctx.strokeStyle=cl.Utils.colorLuminance(_.options.selection.rect.color,-.2),_.surface.ctx.fillStyle=_.options.selection.rect.color,_.surface.ctx.lineWidth=_.options.selection.rect.width,_.surface.ctx.globalAlpha=_.options.selection.rect.opacity,_.surface.ctx.beginPath(),_.surface.ctx.rect(P.sx+.5,P.sy+.5,P.ex-P.sx,P.ey-P.sy),_.surface.ctx.fill(),_.surface.ctx.stroke(),_.surface.ctx.closePath())),_.constructor.superclass._render.call(_)}}function b(t,e){var r,o;if(_.options.selection.enabled&&0!==_.selection.length){for(t.ctx.strokeStyle=_.options.selection.shape.color,t.ctx.lineWidth=_.options.selection.shape.width,t.ctx.globalAlpha=_.options.selection.shape.opacity,t.ctx.beginPath(),r=0,o=e.length;o>r;r++)e[r].renderHover(t);t.ctx.stroke(),t.ctx.closePath()}}function A(t,e){return E.layer&&E.layer.resize(t,e),_.constructor.superclass.resize.call(_,t,e),_}function w(){E.layer&&E.layer.destroy(),L.up=null,L.down=null,_.hover=null,_.options=null,E.layer=null,_.selection=[],_.constructor.superclass.destroy.call(_)}function C(){_.chart.setCursor("pointer")}function S(){_.chart.setCursor()}var _=this;cl.Layer.call(_,e),_.selection=[],_.hover=null,_.dirtyFlagName="sel",cl.Utils.merge(_.options,{draggable:!1,hover:{enabled:!0,width:2,color:cl.Consts.COLOR_RED,opacity:1,showHand:!0},selection:{enabled:!0,multiple:!1,shape:{width:1,color:cl.Consts.COLOR_BLUE,opacity:1},rect:{enabled:!0,width:1,color:cl.Consts.COLOR_LIGHTBLUE,opacity:.3}}}),cl.Utils.merge(_.options,r||{});var E={active:!1,prepared:!1,items:[],bounds:null,sx:0,sy:0,lx:0,ly:0,layer:new cl.Canvas(_.chart.width,_.chart.height)},P={active:!1,sx:0,sy:0,ex:0,ey:0},L={down:null,up:null};_.resize=A,_._render=y,_.destroy=w,_.deselect=o,_.getBounds=h,_.enableDrag=a,_.disableDrag=c,_.getSelection=n,_.shapesFromRect=m,_.shapeFromPoint=v,_.shapesFromPoint=x,_.enableMultiselect=s,_.disableMultiselect=i,_.chart.addEventListener(cl.Event.shapeOver,l),_.chart.addEventListener(cl.Event.shapeOut,p),_.chart.addEventListener(cl.Event.mouseDown,d),_.chart.addEventListener(cl.Event.mouseUp,g),_.chart.addEventListener(cl.Event.mouseMove,f)}return cl.Utils.extend(t,cl.Layer),t.DRAG_THRESOLD=3,t}(),cl.Shape=function(){"use strict";function t(t,e){var r=this;if(!t)throw new Error(cl.Lang.get("errShapeNoParam","parent"));if(r.parent=t,r.type="base",r.isAnimating=!1,r.animProps=null,r._isDragged=!1,r.tween=null,r.props={owner:r,id:void 0,x:0,y:0,color:cl.Consts.COLOR_RED,borderColor:null,border:1,opacity:.3,lineDash:null,links:[],draggable:!0,track:{enabled:!1,width:1,color:cl.Consts.COLOR_GREEN,opacity:.4,startSize:2,endSize:4},hover:null},cl.Utils.merge(r.props,e),r.props.color&&(r.props.color=cl.Color.fromString(r.props.color)),r.props.borderColor?r.props.borderColor=cl.Color.fromString(r.props.borderColor):r.props.borderColor=cl.Utils.colorLuminance(r.props.color,-.2),void 0===r.props.id)throw new Error(cl.Lang.get("errShapeNoParam","id"))}return t.prototype.setHoverStyle=function(t){cl.Utils.merge(this.props.hover,t)},t.prototype.getHoverStyle=function(){return cl.Utils.merge({},this.props.hover)},t.prototype.getPixelArea=function(){},t.prototype.getCenterX=function(){return this.props.x},t.prototype.getCenterY=function(){return this.props.y},t.prototype.processDrag=function(t,e){this.props.x+=t,this.props.y+=e},t.prototype.getBounds=function(){},t.prototype.hitTestRect=function(t,e,r,o){},t.prototype.hitTest=function(t,e){},t.prototype.link=function(t){var e=this,r=!1;t.forEach(function(t){if(-1===e.props.links.indexOf(t)){var o=e.parent.get(t);if(!o||o.props.id===e.props.id)return;e.props.links.push(t),o.isAnimating||(r=!0)}}),r&&(e.parent.updateStatic(),e.parent.apply())},t.prototype.unlink=function(t){var e=this,r=e.props.links.length;t.forEach(function(t){var r=e.props.links.indexOf(t);-1!==r&&e.props.links.splice(r,1)}),r===e.props.links.length||e.isAnimating||(e.parent.updateStatic(),e.parent.apply())},t.prototype.onAnimationUpdate=function(t){},t.prototype.startAnimation=function(t){var e=this;if(this.animProps){this.isAnimating||(this.parent.animCount++,this.parent.updateStatic()),this.isAnimating=!0,this.tween&&(this.tween.stop(),this.tween=null);var r,o;this.animProps.color&&(r=cl.Color.toRGB(this.props.color),o=cl.Color.toRGB(this.animProps.color),this.props.color_r=r.r,this.props.color_g=r.g,this.props.color_b=r.b,this.animProps.color_r=o.r,this.animProps.color_g=o.g,this.animProps.color_b=o.b,delete this.animProps.color),this.animProps.color2&&(r=cl.Color.toRGB(this.props.color2||this.props.color),o=cl.Color.toRGB(this.animProps.color2),this.props.color2_r=r.r,this.props.color2_g=r.g,this.props.color2_b=r.b,this.animProps.color2_r=o.r,this.animProps.color2_g=o.g,this.animProps.color2_b=o.b,delete this.animProps.color2),this.animProps.borderColor&&(r=cl.Color.toRGB(this.props.borderColor||this.props.color),o=cl.Color.toRGB(this.animProps.borderColor),this.props.borderColor_r=r.r,this.props.borderColor_g=r.g,this.props.borderColor_b=r.b,this.animProps.borderColor_r=o.r,this.animProps.borderColor_g=o.g,this.animProps.borderColor_b=o.b,delete this.animProps.borderColor),this.tween=new TWEEN.Tween(this.props).to(this.animProps,t||cl.ShapeManager.ANIMATION_DURATION).easing(TWEEN.Easing.Quadratic.Out).delay(cl.ShapeManager.ANIMATION_DELAY).onUpdate(function(t){e.onAnimationUpdate.apply(this,arguments);var r,o,n;void 0!==this.color_r&&(r=Math.floor(this.color_r),o=Math.floor(this.color_g),n=Math.floor(this.color_b),0>r&&(r=0),0>o&&(o=0),0>n&&(n=0),r>255&&(r=255),o>255&&(o=255),n>255&&(n=255),this.color=cl.Color.toHex(r,o,n)),void 0!==this.color2_r&&(r=Math.floor(this.color2_r),o=Math.floor(this.color2_g),n=Math.floor(this.color2_b),0>r&&(r=0),0>o&&(o=0),0>n&&(n=0),r>255&&(r=255),o>255&&(o=255),n>255&&(n=255),this.color2=cl.Color.toHex(r,o,n)),void 0!==this.borderColor_r&&(r=Math.floor(this.borderColor_r),o=Math.floor(this.borderColor_g),n=Math.floor(this.borderColor_b),0>r&&(r=0),0>o&&(o=0),0>n&&(n=0),r>255&&(r=255),o>255&&(o=255),n>255&&(n=255),this.borderColor=cl.Color.toHex(r,o,n))}).onComplete(function(){this.owner.stopAnimation(!0)}).start()}},t.prototype.getId=function(){return this.props.id},t.prototype.setProps=function(t,e,r){if(this._isDragged)return!1;var o=this.calcAnimProps(t);return o?(this.isAnimating||e&&this.parent.animCount>=cl.ShapeManager.MAX_ANIMATED_ITEMS&&(e=!1),e?this.startAnimation(r):(cl.Utils.merge(this.props,this.animProps,["id","owner"]),this.isAnimating||this.parent.updateStatic()),this.parent.apply(),!0):!1},t.prototype.getProps=function(){return cl.Utils.merge({},this.props,["owner"])},t.prototype.calcAnimProps=function(t){return this.animProps={changed:!1},this.animProps.owner=this,this._isDragged?!1:(void 0!==t.x&&t.x!==this.props.x&&(this.animProps.x=t.x,this.animProps.changed=!0),void 0!==t.y&&t.y!==this.props.y&&(this.animProps.y=t.y,this.animProps.changed=!0),void 0!==t.color&&cl.Color.fromString(t.color)!==cl.Color.fromString(this.props.color)&&(this.animProps.color=t.color,this.animProps.changed=!0),void 0!==t.borderColor&&cl.Color.fromString(t.borderColor)!==cl.Color.fromString(this.props.borderColor)&&(this.animProps.borderColor=t.borderColor,this.animProps.changed=!0),void 0!==t.border&&t.border!==this.props.border&&(this.animProps.border=t.border,this.animProps.changed=!0),void 0!==t.opacity&&t.opacity!==this.props.opacity&&(this.animProps.opacity=t.opacity,this.animProps.changed=!0),this.animProps.changed)},t.prototype.apply=function(){this.parent.apply()},t.prototype._render=function(t){},t.prototype.renderHover=function(t,e){},t.prototype.stopAnimation=function(t){this.tween&&this.animProps&&cl.Utils.merge(this.props,this.animProps,["id","owner"]),this.tween&&!t&&this.tween.stop(),this.tween=null,this.animProps=null,this.isAnimating&&this.parent.animCount--},t.prototype.destroy=function(){this.stopAnimation(),this.props.owner=null,this.props=null,this.parent=null},t}(),function(t){"use strict";function e(t,e){var r=this;this.constructor.superclass.constructor.call(r,t),r._shouldRedrawStatic=!1,r._animCount=0,r._hash=[],r.chart=t,r.items=[],r.dirtyFlagName="items",r["static"]=new cl.Canvas(t.width,t.height),r.options={zIndexUsage:!1,links:{width:1,color:cl.Consts.COLOR_BLACK,opacity:.5},centers:{visible:!1,width:1,size:3,opacity:.3,color:cl.Consts.COLOR_BLACK}},cl.Utils.merge(r.options,e||{}),Object.defineProperties(r,{animCount:{get:function(){return r._animCount},set:function(t){r._animCount=t,0===r._animCount&&r._endAnimation()}},isAnimating:{get:function(){return 0!==r._animCount}},count:{get:function(){return r.items.length}}})}function r(t,e){return t.props.zIndex<e.props.zIndex?-1:1}cl.Utils.extend(e,cl.Layer),e.prototype._render=function(){var t,e,o=this,n=o.items;if(o.options.zIndexUsage===!0&&(n=o.items.sort(r)),o._shouldRedrawStatic){for(o._shouldRedrawStatic=!1,o["static"].resetTransform(),o["static"].clear(),t=0,e=n.length;e>t;t++)n[t].isAnimating||n[t]._render(o["static"],o.chart);o._renderLinks(o["static"],!0),o._renderCenters(o["static"],!0)}for(o.surface.resetTransform(),o.surface.clear(),o.surface.setAlpha(1),o["static"].setAlpha(1),o.surface.draw(o["static"],0,0),t=0,e=n.length;e>t;t++)n[t].isAnimating&&n[t]._render(o.surface,o.chart);o._renderLinks(o.surface,!1),o._renderCenters(o.surface,!1),o._renderTracks(n)},e.prototype._renderTracks=function(t){var e,r,o=this;for(e=0,r=t.length;r>e;e++)if(t[e].isAnimating&&t[e].props.track.enabled&&t[e].animProps){var n,s,i,a;n=o.chart.xAxis.toScreen(t[e].props.x),s=o.chart.yAxis.toScreen(t[e].props.y),i=o.chart.xAxis.toScreen(t[e].animProps.x),a=o.chart.yAxis.toScreen(t[e].animProps.y),o.surface.ctx.strokeStyle=t[e].props.track.color,o.surface.ctx.lineWidth=t[e].props.track.width,o.surface.ctx.beginPath(),o.surface.ctx.moveTo(n,s),o.surface.ctx.lineTo(i,a),o.surface.ctx.stroke(),0!==t[e].props.track.startSize&&0!==t[e].props.track.endSize&&(o.surface.ctx.fillStyle=t[e].props.track.color,0!==t[e].props.track.startSize&&o.surface.ctx.arc(n,s,t[e].props.track.startSize,0,cl.Consts.TWO_PI,!1),0!==t[e].props.track.endSize&&o.surface.ctx.arc(i,a,t[e].props.track.endSize,0,cl.Consts.TWO_PI,!1),o.surface.ctx.fill())}},e.prototype._renderLinks=function(t,e){var r,o,n,s,i=this;for(t.ctx.lineWidth=i.options.links.width,t.ctx.strokeStyle=i.options.links.color,t.setAlpha(i.options.links.opacity),t.ctx.beginPath(),r=0,n=i.items.length;n>r;r++){var a=!i.items[r].isAnimating;if((a||!e)&&(s=i.items[r].props.links.length,0!==s)){var c=i.chart.xAxis.toScreen(i.items[r].getCenterX()),l=i.chart.yAxis.toScreen(i.items[r].getCenterY());for(o=0;s>o;o++)if(i.items[r].props.links[o]!=i.items[r].props.id){var p=i.get(i.items[r].props.links[o]);if(p&&(!p.isAnimating||!e)&&(e||!a||p.isAnimating)){var h=i.chart.xAxis.toScreen(p.props.x),u=i.chart.yAxis.toScreen(p.props.y);t.ctx.moveTo(c,l),t.ctx.lineTo(h,u)}}}}t.ctx.stroke(),t.ctx.closePath()},e.prototype._renderCenters=function(t,e){var r,o,n,s,i=this;if(i.options.centers.visible){for(t.setAlpha(i.options.centers.opacity),t.setLineStyle(i.options.centers.width,i.options.centers.color),t.ctx.beginPath(),r=0,o=i.items.length;o>r;r++)e&&i.items[r].isAnimating||(e||i.items[r].isAnimating)&&(n=i.chart.toScreenX(i.items[r].getCenterX()),s=i.chart.toScreenY(i.items[r].getCenterY()),t.ctx.moveTo(n+i.options.centers.size,s),t.drawCircle(n,s,i.options.centers.size));t.ctx.stroke(),t.ctx.closePath()}},e.prototype.hideCenters=function(){var t=this;t.options.centers.visible=!1,t.updateStatic(),t.apply()},e.prototype.showCenters=function(){var t=this;t.options.centers.visible=!0,t.updateStatic(),t.apply()},e.prototype._endAnimation=function(){var t,e,r=!1,o=[],n=this;for(t=0,e=n.items.length;e>t;t++)n.items[t].isAnimating&&null===n.items[t].tween&&(n.items[t].isAnimating=!1,r=!0,o.push(n.items[t]));for(t=0,e=o.length;e>t;t++){var s=n.items.indexOf(o[t]);n.items.splice(s,1)}for(t=0,e=o.length;e>t;t++)n.items.push(o[t]);n.updateStatic(),n.apply()},e.prototype.get=function(t){var e=this;return e._hash[t]?e._hash[t]:void 0},e.prototype.clear=function(){for(var t=this;0!==t.count;)t.remove(t.items[0]);t.chart.selector.selection=[],t.chart.selector.apply(),t.updateStatic(),t.apply()},e.prototype.add=function(t,e,r,o){var n,s,i,a,c,l=this,p=r||!1;if(!e)throw new Error(cl.Lang.get("errNoShapeClass"));for(i=t instanceof Array?t:[t],n=0,s=i.length;s>n;n++){if(void 0===i[n].id)throw new Error(cl.Lang.get("errShapeNoParam","id"));if(a=l.get(i[n].id)){if(a.constructor!==e)throw new Error(cl.Lang.get("errShapeType"));var h=a.setProps(i[n],p,o);h&&!a.isAnimating&&l.updateStatic()}else c=new e(l,i[n]),l.items.push(c),l._hash[i[n].id]=c,l.updateStatic()}l.apply()},e.prototype._removeItem=function(t){var e=this;if(t){var r=e.items.indexOf(t);-1!==r&&e.items[r]&&(delete e._hash[t.props.id],e.items.splice(r,1),e.apply(),r=e.chart.selector.selection.indexOf(t),-1!==r&&(e.chart.selector.selection.splice(r,1),e.chart.selector.apply()),t.destroy())}},e.prototype.remove=function(t){var e=this;switch(typeof t){case"object":e._removeItem(t);break;default:e._removeItem(e.get(t))}},e.prototype.resize=function(t,e){var r=this;return r["static"].resize(t,e),r.updateStatic(),r.constructor.superclass.resize.call(r,t,e),r},e.prototype.updateStatic=function(){this._shouldRedrawStatic=!0},e.prototype.destroy=function(){var t=this;t.clear(),t.items=null,t["static"].destroy(),t._hash=null,t.constructor.superclass.destroy.call(t)},e.MAX_ANIMATED_ITEMS=500,e.ANIMATION_DELAY=100,e.ANIMATION_DURATION=400,t.ShapeManager=e}(cl),cl.Bubble=function(){"use strict";function t(t,e){function r(){return Math.PI*p.props.size*p.props.size}function o(){return{x:p.parent.chart.xAxis.toScreen(p.props.x)-p.props.size,y:p.parent.chart.yAxis.toScreen(p.props.y)-p.props.size,w:2*p.props.size,h:2*p.props.size}}function n(t,e,r,o){var n=p.parent.chart.xAxis.toScreen(p.props.x),s=p.parent.chart.yAxis.toScreen(p.props.y),i=Math.abs(n-t),a=Math.abs(s-e),c=p.props.size;if(i>r+c)return!1;if(a>o+c)return!1;if(r>=i)return!0;if(o>=a)return!0;var l=(i-r)*(i-r)+(a-o)*(a-o);return c*c>=l}function s(t,e){var r=p.parent.chart.xAxis.toScreen(p.props.x),o=p.parent.chart.yAxis.toScreen(p.props.y);return(t-r)*(t-r)+(e-o)*(e-o)<=p.props.size*p.props.size}function i(t){return p.constructor.superclass.calcAnimProps.call(p,t),void 0!==t.size&&t.size!==p.props.size&&(p.animProps.size=t.size,p.animProps.changed=!0),p.animProps.changed}function a(t){if(!p._isDragged){var e=p.parent.chart;p.props.size>=0&&(t.setAlpha(p.props.opacity),t.setFillColor(p.props.color),p.props.border&&t.setLineStyle(p.props.border,p.props.borderColor,!0),p.props.lineDash&&t.setLineDash(p.props.lineDash),t.ctx.beginPath(),t.ctx.arc(e.xAxis.toScreen(p.props.x),e.yAxis.toScreen(p.props.y),p.props.size,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),p.props.border&&t.ctx.stroke(),t.ctx.closePath(),p.props.lineDash&&t.setLineDash([])),p.constructor.superclass._render.call(p,t)}}function c(t,e){if(!p._isDragged){e=(e||0)+(p.props.border||0)/2;var r=p.parent.chart;if(p.props.size>=0){var o=r.xAxis.toScreen(p.props.x),n=r.yAxis.toScreen(p.props.y);t.ctx.moveTo(o+p.props.size+e,n),t.ctx.arc(o,n,p.props.size+e,0,cl.Consts.TWO_PI,!1)}p.constructor.superclass.renderHover.call(p,t)}}function l(){p.constructor.superclass.destroy.call(p)}var p=this;cl.Shape.call(p,t,e),p.type="bubble",p.parent=t,p._render=a,p.destroy=l,p.hitTest=s,p.getBounds=o,p.hitTestRect=n,p.renderHover=c,p.getPixelArea=r,p.calcAnimProps=i;if(void 0===p.props.size)throw new Error(cl.Lang.get("errShapeNoParam","size"))}return cl.Utils.extend(t,cl.Shape),t}(),cl.Centroid=function(){"use strict";function t(t,e){var r=this;cl.Bubble.call(r,t,e),r.type="centroid"}return cl.Utils.extend(t,cl.Bubble),t}(),cl.Rect=function(){"use strict";function t(t,e){function r(){var t=f.getBounds();return t.w*t.h}function o(){var t,e;return f.props.x<f.props.x2?(t=f.props.x,e=f.props.x2):(t=f.props.x2,e=f.props.x),t+Math.abs(e-t)/2}function n(){var t,e;return f.props.y<f.props.y2?(t=f.props.y,e=f.props.y2):(t=f.props.y2,e=f.props.y),t+Math.abs(e-t)/2}function s(t,e){f.props.x2+=t,f.props.y2+=e,f.constructor.superclass.processDrag.call(f,t,e)}function i(){var t,e,r,o,n,s,i,a;return t=f.parent.chart.xAxis.toScreen(f.props.x),e=f.parent.chart.yAxis.toScreen(f.props.y),r=f.parent.chart.xAxis.toScreen(f.props.x2),o=f.parent.chart.yAxis.toScreen(f.props.y2),n=Math.min(t,r),s=Math.min(e,o),i=Math.max(t,r),a=Math.max(e,o),{x:n,y:s,w:i-n,h:a-s}}function a(t,e,r,o){var n,s,i,a,c,l,p,h;n=f.parent.chart.xAxis.toScreen(f.props.x),s=f.parent.chart.yAxis.toScreen(f.props.y),i=f.parent.chart.xAxis.toScreen(f.props.x2),a=f.parent.chart.yAxis.toScreen(f.props.y2),c=Math.min(n,i),l=Math.min(s,a),p=Math.max(n,i),h=Math.max(s,a);var u=(p-c)/2,d=(h-l)/2,g=c+u,m=l+d,x=Math.abs(g-t),v=Math.abs(m-e);return u+r>=x&&d+o>=v}function c(t,e){var r,o,n,s,i,a,c,l;return r=f.parent.chart.xAxis.toScreen(f.props.x),o=f.parent.chart.yAxis.toScreen(f.props.y),n=f.parent.chart.xAxis.toScreen(f.props.x2),s=f.parent.chart.yAxis.toScreen(f.props.y2),i=Math.min(r,n),a=Math.min(o,s),c=Math.max(r,n),l=Math.max(o,s),t>=i&&c>=t&&e>=a&&l>=e}function l(t){return f.constructor.superclass.calcAnimProps.call(f,t),void 0!==t.x2&&t.x2!==f.props.x2&&(f.animProps.x2=t.x2,f.animProps.changed=!0),void 0!==t.y2&&t.y2!==f.props.y2&&(f.animProps.y2=t.y2,f.animProps.changed=!0),void 0!==t.borderRadius&&t.borderRadius!==f.props.borderRadius&&(f.animProps.borderRadius=t.borderRadius,f.animProps.changed=!0),void 0!==t.color2&&cl.Color.fromString(t.color2)!==cl.Color.fromString(f.props.color2)&&(f.animProps.color2=t.color2,f.animProps.changed=!0),f.animProps.changed}function p(t){if(!f._isDragged){var e,r,o,n,s=f.parent.chart;if(e=s.xAxis.toScreen(f.props.x),r=s.yAxis.toScreen(f.props.y),o=s.xAxis.toScreen(f.props.x2),n=s.yAxis.toScreen(f.props.y2),t.setAlpha(f.props.opacity),f.props.color2&&f.props.color!==f.props.color2){var i,a,c,l;i=Math.min(e,o),a=Math.min(r,n),c=Math.max(e,o),l=Math.max(r,n);var p=t.ctx.createLinearGradient(i,a,c,l);p.addColorStop(0,f.props.color),p.addColorStop(1,f.props.color2),t.ctx.fillStyle=p}else t.setFillColor(f.props.color);f.props.border&&t.setLineStyle(f.props.border,f.props.borderColor),f.props.lineDash&&t.setLineDash(f.props.lineDash),t.ctx.beginPath(),t.drawRect(e,r,o,n,f.props.borderRadius),t.ctx.fill(),f.props.border&&(t.ctx.stroke(),t.restoreLineFix()),t.ctx.closePath(),f.props.lineDash&&t.setLineDash([]),f.constructor.superclass._render.call(f,t)}}function h(t,e){if(!f._isDragged){e=(e||0)+(f.props.border||0)/2;var r,o,n,s,i=f.parent.chart;r=i.xAxis.toScreen(f.props.x),o=i.yAxis.toScreen(f.props.y),n=i.xAxis.toScreen(f.props.x2),s=i.yAxis.toScreen(f.props.y2),t.drawRect(r,o,n,s,f.props.borderRadius,!0),f.constructor.superclass.renderHover.call(f,t)}}function u(){f.constructor.superclass.destroy.call(f)}var f=this;cl.Shape.call(f,t,e),f.type="rect",f.parent=t,f._render=p,f.destroy=u,f.hitTest=c,f.getBounds=i,f.getCenterX=o,f.getCenterY=n,f.hitTestRect=a,f.renderHover=h,f.processDrag=s,f.getPixelArea=r,f.calcAnimProps=l;var d=e||{};if(d.borderRadius=d.borderRadius||0,f.props.color2&&(f.props.color2=cl.Color.fromString(f.props.color2)),void 0===f.props.x2)throw new Error(cl.Lang.get("errShapeNoParam","x2"));if(void 0===f.props.y2)throw new Error(cl.Lang.get("errShapeNoParam","y2"))}return cl.Utils.extend(t,cl.Shape),t}(),cl.Line=function(){"use strict";function t(e,r){function o(){return Math.sqrt(cl.Utils.distSq(m.props.x,m.props.y,m.props.x2,m.props.y2))}function n(){var t,e,r,o=this;void 0!==o.pointColor_r&&(t=Math.floor(o.pointColor_r),e=Math.floor(o.pointColor_g),r=Math.floor(o.pointColor_b),0>t&&(t=0),0>e&&(e=0),0>r&&(r=0),t>255&&(t=255),e>255&&(e=255),r>255&&(r=255),o.pointColor=cl.Color.toHex(t,e,r)),void 0!==o.pointColor2_r&&(t=Math.floor(o.pointColor2_r),e=Math.floor(o.pointColor2_g),r=Math.floor(o.pointColor2_b),0>t&&(t=0),0>e&&(e=0),0>r&&(r=0),t>255&&(t=255),e>255&&(e=255),r>255&&(r=255),o.pointColor2=cl.Color.toHex(t,e,r))}function s(t){var e,r,o=this;o.animProps.pointColor&&(e=cl.Color.toRGB(o.props.pointColor||o.props.color),r=cl.Color.toRGB(o.animProps.pointColor),o.props.pointColor_r=e.r,o.props.pointColor_g=e.g,o.props.pointColor_b=e.b,o.animProps.pointColor_r=r.r,o.animProps.pointColor_g=r.g,o.animProps.pointColor_b=r.b,delete o.animProps.pointColor),o.animProps.pointColor2&&(e=cl.Color.toRGB(o.props.pointColor2||o.props.pointColor||o.props.color),r=cl.Color.toRGB(o.animProps.pointColor2),o.props.pointColor2_r=e.r,o.props.pointColor2_g=e.g,o.props.pointColor2_b=e.b,o.animProps.pointColor2_r=r.r,o.animProps.pointColor2_g=r.g,o.animProps.pointColor2_b=r.b,delete o.animProps.pointColor2),m.constructor.superclass.startAnimation.call(m,t)}function i(){var t,e;return m.props.x<m.props.x2?(t=m.props.x,e=m.props.x2):(t=m.props.x2,e=m.props.x),t+Math.abs(e-t)/2}function a(){var t,e;return m.props.y<m.props.y2?(t=m.props.y,e=m.props.y2):(t=m.props.y2,e=m.props.y),t+Math.abs(e-t)/2}function c(t,e){m.props.x2+=t,m.props.y2+=e,m.constructor.superclass.processDrag.call(m,t,e)}function l(){var t,e,r,o,n,s,i,a,c,l;return c=m.props.size||0,l=m.props.size2||0,t=m.parent.chart.xAxis.toScreen(m.props.x),e=m.parent.chart.yAxis.toScreen(m.props.y),r=m.parent.chart.xAxis.toScreen(m.props.x2),o=m.parent.chart.yAxis.toScreen(m.props.y2),r>t?(t-=c,r+=l):(t+=c,r-=l),o>e?(e-=c,o+=l):(e+=c,o-=l),n=Math.min(t,r),s=Math.min(e,o),i=Math.max(t,r),a=Math.max(e,o),{x:n,y:s,w:i-n,h:a-s}}function p(t,e,r,o){var n,s,i,a;return n=m.parent.chart.xAxis.toScreen(m.props.x),s=m.parent.chart.yAxis.toScreen(m.props.y),i=m.parent.chart.xAxis.toScreen(m.props.x2),a=m.parent.chart.yAxis.toScreen(m.props.y2),cl.Utils.lineRectIntersect(t-r,e-o,t+r,e+o,n,s,i,a)}function h(e,r){var o,n,s,i;return o=m.parent.chart.xAxis.toScreen(m.props.x),n=m.parent.chart.yAxis.toScreen(m.props.y),s=m.parent.chart.xAxis.toScreen(m.props.x2),i=m.parent.chart.yAxis.toScreen(m.props.y2),cl.Utils.distToSegmentSquared(e,r,o,n,s,i)<t.HOVER_THRESHOLD}function u(t){return m.constructor.superclass.calcAnimProps.call(m,t),void 0!==t.x2&&t.x2!==m.props.x2&&(m.animProps.x2=t.x2,m.animProps.changed=!0),void 0!==t.y2&&t.y2!==m.props.y2&&(m.animProps.y2=t.y2,m.animProps.changed=!0),void 0!==t.size&&t.size!==m.props.size&&(m.animProps.size=t.size,m.animProps.changed=!0),void 0!==t.size2&&t.size2!==m.props.size2&&(m.animProps.size2=t.size2,m.animProps.changed=!0),void 0!==t.pointColor&&cl.Color.fromString(t.pointColor)!==cl.Color.fromString(m.props.pointColor)&&(m.animProps.pointColor=t.pointColor,m.animProps.changed=!0),void 0!==t.pointColor2&&cl.Color.fromString(t.pointColor2)!==cl.Color.fromString(m.props.pointColor2)&&(m.animProps.pointColor2=t.pointColor2,m.animProps.changed=!0),m.animProps.changed}function f(t){if(!m._isDragged){var e,r,o,n,s=m.parent.chart;e=s.xAxis.toScreen(m.props.x),r=s.yAxis.toScreen(m.props.y),o=s.xAxis.toScreen(m.props.x2),n=s.yAxis.toScreen(m.props.y2),t.setAlpha(m.props.opacity),t.setLineStyle(m.props.border,m.props.color),m.props.lineDash&&t.setLineDash(m.props.lineDash),t.drawLine(e,r,o,n),m.props.size&&(t.ctx.beginPath(),t.setFillColor(m.props.pointColor||m.props.color),t.ctx.moveTo(e,r),t.ctx.arc(e,r,m.props.size,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),t.ctx.closePath()),m.props.size2&&(t.ctx.beginPath(),t.setFillColor(m.props.pointColor2||m.props.pointColor||m.props.color),t.ctx.moveTo(o,n),t.ctx.arc(o,n,m.props.size2,0,cl.Consts.TWO_PI,!1),t.ctx.fill(),t.ctx.closePath()),m.props.lineDash&&t.setLineDash([]),m.constructor.superclass._render.call(m,t)}}function d(t,e){if(!m._isDragged){var r,o,n,s,i=m.parent.chart;r=i.xAxis.toScreen(m.props.x),o=i.yAxis.toScreen(m.props.y),n=i.xAxis.toScreen(m.props.x2),s=i.yAxis.toScreen(m.props.y2),t.drawLine(r,o,n,s,!0),m.props.size&&(t.ctx.moveTo(r+m.props.size+(e||0),o),t.ctx.arc(r,o,m.props.size+(e||0),0,cl.Consts.TWO_PI,!1)),m.props.size2&&(t.ctx.moveTo(n+m.props.size2+(e||0),s),t.ctx.arc(n,s,m.props.size2+(e||0),0,cl.Consts.TWO_PI,!1)),m.constructor.superclass.renderHover.call(m,t)}}function g(){m.constructor.superclass.destroy.call(m)}var m=this;cl.Shape.call(m,e,r),m.type="line",m.parent=e,m._render=f,m.destroy=g,m.hitTest=h,m.getBounds=l,m.getCenterX=i,m.getCenterY=a,m.hitTestRect=p,m.renderHover=d,m.processDrag=c,m.getPixelArea=o,m.calcAnimProps=u,m.startAnimation=s,m.onAnimationUpdate=n;if(m.props.pointColor&&(m.props.pointColor=cl.Color.fromString(m.props.pointColor)),m.props.pointColor2&&(m.props.pointColor2=cl.Color.fromString(m.props.pointColor2)),void 0===m.props.x2)throw new Error(cl.Lang.get("errShapeNoParam","x2"));if(void 0===m.props.y2)throw new Error(cl.Lang.get("errShapeNoParam","y2"))}return cl.Utils.extend(t,cl.Shape),t.HOVER_THRESHOLD=25,t}(),cl.PolyLine=function(){"use strict";function t(t,e){function r(t){var e,r;if(g.tween&&0!==x.pointsTo.length){for(e=0,r=g.props.points.length;r>e;e++)g.props.points[e]=x.pointsTo[e];g.props.delPoints&&g.props.points.splice(g.props.points.length-2*g.props.delPoints,2*g.props.delPoints)}x.closedWidth=0,x.pointsFrom=[],x.pointsTo=[],x.closedFrom=g.props.closed,x.closedTo=g.props.closed,g.constructor.superclass.stopAnimation.call(g,t)}function o(){var t,e,r=0;for(t=0,e=g.props.points.length;e-2>t;t+=2)r+=Math.sqrt(cl.Utils.distSq(g.props.points[t],g.props.points[t+1],g.props.points[t+2],g.props.points[t+3]));return g.props.closed&&(r+=Math.sqrt(cl.Utils.distSq(g.props.points[e-2],g.props.points[e-1],g.props.points[0],g.props.points[1]))),r}function n(t){var e,r,o=this;if(0!==x.pointsFrom.length&&0!==x.pointsTo.length)for(e=0,r=o.points.length;r>e;e++)o.points[e]=x.pointsFrom[e]+(x.pointsTo[e]-x.pointsFrom[e])*t;x.closedFrom!==x.closedTo&&(x.closedTo?x.closedWidth=t*g.props.border:x.closedWidth=(1-t)*g.props.border)}function s(){var t,e,r,o=0,n=0;for(t=0,e=g.props.points.length;e-2>t;t+=2)r=g.props.points[t]*g.props.points[t+3]-g.props.points[t+2]*g.props.points[t+1],o+=r,n+=(g.props.points[t]+g.props.points[t+2])*r;return r=g.props.points[e-2]*g.props.points[1]-g.props.points[0]*g.props.points[e-1],o+=r,n+=(g.props.points[e-2]+g.props.points[0])*r,r=3*o,n/r}function i(){var t,e,r,o=0,n=0;for(t=0,e=g.props.points.length;e-2>t;t+=2)r=g.props.points[t]*g.props.points[t+3]-g.props.points[t+2]*g.props.points[t+1],o+=r,n+=(g.props.points[t+1]+g.props.points[t+3])*r;return r=g.props.points[e-2]*g.props.points[1]-g.props.points[0]*g.props.points[e-1],o+=r,n+=(g.props.points[e-1]+g.props.points[1])*r,r=3*o,n/r}function a(t,e){var r,o;for(r=0,o=g.props.points.length;o>r;r+=2)g.props.points[r]+=t,g.props.points[r+1]+=e;g.constructor.superclass.processDrag.call(g,t,e)}function c(){var t,e,r,o,n,s,i,a;for(n=Number.MAX_VALUE,s=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE,t=0,e=g.props.points.length;e>t;t+=2)r=g.parent.chart.xAxis.toScreen(g.props.points[t]),o=g.parent.chart.yAxis.toScreen(g.props.points[t+1]),n>r&&(n=r),r>i&&(i=r),s>o&&(s=o),o>a&&(a=o);return{x:n,y:s,w:i-n,h:a-s}}function l(t,e,r,o){var n,s,i,a,c,l;for(n=0,s=g.props.points.length;s-2>n;n+=2)if(i=g.parent.chart.xAxis.toScreen(g.props.points[n]),a=g.parent.chart.yAxis.toScreen(g.props.points[n+1]),c=g.parent.chart.xAxis.toScreen(g.props.points[n+2]),l=g.parent.chart.yAxis.toScreen(g.props.points[n+3]),cl.Utils.lineRectIntersect(t-r,e-o,t+r,e+o,i,a,c,l))return!0;
return g.props.closed&&(i=g.parent.chart.xAxis.toScreen(g.props.points[s-2]),a=g.parent.chart.yAxis.toScreen(g.props.points[s-1]),c=g.parent.chart.xAxis.toScreen(g.props.points[0]),l=g.parent.chart.yAxis.toScreen(g.props.points[1]),cl.Utils.lineRectIntersect(t-r,e-o,t+r,e+o,i,a,c,l))?!0:!1}function p(t,e){var r,o,n,s,i,a;for(r=0,o=g.props.points.length;o-2>r;r+=2)if(n=g.parent.chart.xAxis.toScreen(g.props.points[r]),s=g.parent.chart.yAxis.toScreen(g.props.points[r+1]),i=g.parent.chart.xAxis.toScreen(g.props.points[r+2]),a=g.parent.chart.yAxis.toScreen(g.props.points[r+3]),cl.Utils.distToSegmentSquared(t,e,n,s,i,a)<cl.Line.HOVER_THRESHOLD)return!0;return g.props.closed&&(n=g.parent.chart.xAxis.toScreen(g.props.points[o-2]),s=g.parent.chart.yAxis.toScreen(g.props.points[o-1]),i=g.parent.chart.xAxis.toScreen(g.props.points[0]),a=g.parent.chart.yAxis.toScreen(g.props.points[1]),cl.Utils.distToSegmentSquared(t,e,n,s,i,a)<cl.Line.HOVER_THRESHOLD)?!0:!1}function h(t){var e,r,o;if(g.constructor.superclass.calcAnimProps.call(g,t),void 0!==t.lineJoin&&g.props.lineJoin!==t.lineJoin&&(g.animProps.lineJoin=t.lineJoin,g.animProps.changed=!0),void 0!==t.closed&&g.props.closed!==t.closed&&(x.closedFrom=g.props.closed,x.closedTo=t.closed,g.animProps.closed=t.closed,g.animProps.changed=!0),void 0!==t.points){if(t.points.length===g.props.points.length){for(e=0,r=t.points.length;r>e;e++)if(g.props.points[e]!==t.points[e]){g.animProps.changed=!0;break}}else g.animProps.changed=!0;if(g.animProps.changed){if(g.props.delPoints=0,g.props.points.length<t.points.length)for(o=g.props.points.length-2,e=g.props.points.length,r=t.points.length;r>e;e+=2)g.props.points.push(g.props.points[o]),g.props.points.push(g.props.points[o+1]);else if(g.props.points.length>t.points.length)for(o=t.points.length-2,e=t.points.length,r=g.props.points.length;r>e;e+=2)t.points.push(t.points[o]),t.points.push(t.points[o+1]),g.props.delPoints++;for(x.pointsFrom=[],x.pointsTo=[],e=0,r=g.props.points.length;r>e;e++)x.pointsFrom.push(g.props.points[e]);for(e=0,r=t.points.length;r>e;e++)x.pointsTo.push(t.points[e])}}return g.animProps.changed}function u(t){if(!g._isDragged){var e,r,o=g.parent.chart,n=[],s=[];for(e=0,r=g.props.points.length;r>e;e+=2)n.push(o.xAxis.toScreen(g.props.points[e])),s.push(o.yAxis.toScreen(g.props.points[e+1]));for(t.setAlpha(g.props.opacity),t.setLineStyle(g.props.border,g.props.color,!0),g.props.lineJoin&&(t.ctx.lineJoin=g.props.lineJoin),g.props.lineDash&&t.setLineDash(g.props.lineDash),t.ctx.beginPath(),t.ctx.moveTo(n[0],s[0]),e=1;r>e;e++)t.ctx.lineTo(n[e],s[e]);(g.props.closed||x.closedWidth)&&(x.closedWidth?(t.ctx.stroke(),t.ctx.beginPath(),t.setLineStyle(x.closedWidth,g.props.color,!0),t.ctx.moveTo(n[n.length-1],s[s.length-1]),t.ctx.lineTo(n[0],s[0])):(t.ctx.lineTo(n[0],s[0]),t.ctx.closePath())),t.ctx.stroke(),g.props.lineDash&&t.setLineDash([]),g.props.lineJoin&&(t.ctx.lineJoin="miter"),g.constructor.superclass._render.call(g,t)}}function f(t,e){if(!g._isDragged){var r,o,n=g.parent.chart,s=[],i=[];for(r=0,o=g.props.points.length;o>r;r+=2)s.push(n.xAxis.toScreen(g.props.points[r])),i.push(n.yAxis.toScreen(g.props.points[r+1]));for(t.ctx.beginPath(),t.ctx.moveTo(s[0],i[0]),r=1;o>r;r++)t.ctx.lineTo(s[r],i[r]);g.props.closed&&(t.ctx.lineTo(s[0],i[0]),t.ctx.closePath()),t.ctx.stroke(),g.constructor.superclass.renderHover.call(g,t)}}function d(){g.constructor.superclass.destroy.call(g)}var g=this;cl.Shape.call(g,t,e),g.type="polyline",g.parent=t,g._render=u,g.destroy=d,g.hitTest=p,g.getBounds=c,g.getCenterX=s,g.getCenterY=i,g.hitTestRect=l,g.renderHover=f,g.processDrag=a,g.getPixelArea=o,g.calcAnimProps=h,g.onAnimationUpdate=n,g.stopAnimation=r;var m=e||{};if(m.borderRadius=m.borderRadius||0,g.props.pointColor&&(g.props.pointColor=cl.Color.fromString(g.props.pointColor)),g.props.pointColor2&&(g.props.pointColor2=cl.Color.fromString(g.props.pointColor2)),void 0===g.props.points)throw new Error(cl.Lang.get("errShapeNoParam","points"));if(g.props.points.length<4)throw new Error(cl.Lang.get("errShapeNoParam","points"));var x={pointsFrom:[],pointsTo:[],closedFrom:!1,closedTo:!1,closedWidth:0}}return cl.Utils.extend(t,cl.Shape),t}(),cl.Chart=function(){"use strict";function t(t){function e(t){t?w.screen.el.style.cursor=t:w.screen.el.style.cursor="default"}function r(t){return w.xAxis.toAxis(t)}function o(t){return w.yAxis.toAxis(t)}function n(t){return w.yAxis.toScreen(t)}function s(t){return w.xAxis.toScreen(t)}function i(t,e,r){w.shapes.add(t,cl.Bubble,e,r)}function a(t,e,r){w.shapes.add(t,cl.Rect,e,r)}function c(t,e,r){w.shapes.add(t,cl.Line,e,r)}function l(){if(w.options.element){w.options.element.parentNode;w.options.preloader.classList.add("cl-preloader-hidden")}}function p(){if(w.options.element&&w.options.element.parentNode){var t=w.preloader,e=w.options.element.parentNode;t.classList.remove("hidden"),t.classList.remove("cl-preloader-hidden"),t.classList.add("cl-preloader");var r="",o=Math.floor(w.element.offsetLeft+w.width/2-t.offsetWidth/2),n=Math.floor(w.element.offsetTop+w.height/2-t.offsetHeight/2);r="left: "+o+"px; top: "+n+"px",r+=";"+t.getAttribute("style"),t.setAttribute("style",r),e.appendChild(t)}}function h(t){S[t]=!0}function u(){return w.background}function f(){C=!1,S.all=!1;for(var t in S)S.hasOwnProperty(t)&&(S[t]=!1)}function d(){if(S.all)return!0;for(var t in S)if(S.hasOwnProperty(t)&&S[t])return!0;return!1}function g(){C||(requestAnimFrame(x),C=!0)}function m(t){w.background.setImage(t)}function x(t){if(TWEEN.update(t),w.screen){var e,r;for(w.shapes.isAnimating&&(w.shapes.apply(),w.selector.apply()),S.axis&&(S.shapes=!0,w.shapes.updateStatic()),e=0,r=w.layers.length;r>e;e++)(S.all||S[w.layers[e].dirtyFlagName])&&w.layers[e]._render();for(w.screen.clear(),e=0,r=w.layers.length;r>e;e++)w.screen.draw(w.layers[e].surface);f(),w.shapes.isAnimating&&!C&&(C=!0,requestAnimFrame(x))}}function v(t,e){var r,o;for(r=0,o=w.layers.length;o>r;r++)w.layers[r].resize(t,e);w.screen.resize(t,e),S.all=!0,w.redraw()}function y(t,e){w.events.addEventListener(t,e)}function b(t,e){w.events.removeEventListener(t,e)}function A(){var t,e;for(t=0,e=w.layers.length;e>t;t++)w.layers[t].destroy();w.screen.destroy(),w.layers=[],w.screen=null,w.background=null,w.element=null}var w=this;w.options=t||{},w.xAxis=null,w.yAxis=null,w.preloader=w.options.preloader,w.element=w.options.element,Object.defineProperties(w,{isDirty:{get:d},width:{get:function(){return w.screen.width}},height:{get:function(){return w.screen.height}}});var C=!1,S={all:!1};if(w.redraw=g,w.resize=v,w.destroy=A,w.toAxisX=r,w.toAxisY=o,w.addRects=a,w.addLines=c,w.setCursor=e,w.toScreenX=s,w.toScreenY=n,w.addBubbles=i,w.setDirtyFlag=h,w.showPreloader=p,w.hidePreloader=l,w.getBackground=u,w.setBackground=m,w.addEventListener=y,w.removeEventListener=b,!w.element)throw cl.Lang.get("errNoElements");w.screen=new cl.Canvas(w.options.width||w.element.offsetWidth,w.options.height||w.element.offsetHeight),w.screen.el.classList.add("cl-chart"),w.events=new cl.EventManager(w),w.background=new cl.Background(w,w.options.background||{}),w.axis=new cl.AxisManager(w),w.shapes=new cl.ShapeManager(w,w.options.shapes),w.selector=new cl.Selector(w,w.options.selector),w.layers=[w.background,w.axis,w.shapes,w.selector],w.xAxis=w.axis.add(cl.Utils.merge({type:"x"},w.options.xAxis||{})),w.yAxis=w.axis.add(cl.Utils.merge({type:"y"},w.options.yAxis||{})),w.element.appendChild(w.screen.el),w.redraw()}return t}();