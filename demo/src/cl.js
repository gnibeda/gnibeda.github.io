var cl=function(){return{version:"0.0.2"}}();cl.Utils=function(){"use strict";function t(){this.merge=i,this.extend=e,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}()}function e(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype}function i(t,e){for(var n in e)if(e.hasOwnProperty(n))try{e[n].constructor==Object?t[n]=i(t[n]||{},e[n]):t[n]=e[n]}catch(r){t[n]=e[n]}return t}return new t}(),cl.Lang=function(){"use strict";function t(){this.get=e}function e(t,e){if(!n[i]||!n[i][t])return t;var r=n[i][t]||t;if(e)for(var s=0;s<e.length;s++)r=r.replace("%"+(s+1).toString(),e[s]);return r}var i="en",n={en:{errNoElements:"No element specified in options",errAxisHaveNoChart:"Trying to access axis with no parent chart",errDelBaseAxis:"Can not delete base '%1' axis"}};return new t}(),cl.Consts=function(){"use strict";function t(){cl.Utils.merge(this,e)}var e={COLOR_BLACK:"#000000",COLOR_WHITE:"#FFFFFF",COLOR_GRAY:"#AAAAAA",FONT_SIZE:14,FONT_NAME:"Arial"};return new t}(),cl.Layer=function(){"use strict";function t(t){this.chart=t,this.surface=new cl.Canvas(t.width,t.height),this.dirtyFlagName=""}return t.prototype.show=function(){return this.options&&(this.options.visible=!0),this},t.prototype.hide=function(){return this.options&&(this.options.visible=!1),this},t.prototype.apply=function(){this.chart&&(this.chart.setDirtyFlag(this.dirtyFlagName),this.chart.redraw())},t.prototype.render=function(){},t.prototype.resize=function(t,e){return this.surface.resize(t,e),this},t.prototype.destroy=function(){this.chart=null,this.surface.destroy(),this.surface=null},t}(),cl.Axis=function(){"use strict";function t(t,e){function i(){return P.options.ticks.big.interval}function n(t){return P.options.ticks.big.interval=t,P}function r(){return P.options.ticks.small.interval}function s(t){return P.options.ticks.small.interval=t,P}function o(){return P.options.visible=!1,P}function a(){return P.options.visible=!0,P}function l(){return P.options.title.style}function c(t){return P.options.title.style=t,P}function h(){return P.options.title.color}function f(t){return P.options.title.color=t,P}function u(){return P.options.title.font}function g(t){return P.options.title.font=t,P}function p(){return P.options.title.size}function d(t){return P.options.title.size=t,P}function m(){return P.options.title.align}function x(t){return P.options.title.align=t,P}function y(t){return P.options.style.color=t,P}function b(){return P.options.style.color}function w(){return{start:P.options.margin.start,end:P.options.margin.end}}function A(t,e){return P.options.margin.start=t,P.options.margin.end=e,P}function v(t){return P.options.offset=t,P}function k(){return P.options.offset}function F(){return P.options.max}function L(){return P.options.min}function T(t){return P.options.max=t,P}function C(t){return P.options.min=t,P}function M(t){return P.options.name=t,P}function S(){return P.options.name}function z(t){if(P.options&&P.options.visible){var e,i,n,r,s=P.options,o="y"==P.options.type,a=(s.margin.start,s.margin.end,P.chart.width,P.chart.height,s.ticks.small.interval.toString()),l=a.indexOf("."),c=0;-1!==l&&(c=a.length-l-1),t.resetTransform(),t.setLineStyle(s.style.lineWidth,s.style.color),t.setFillColor(s.style.color),o?(r=P.options.offset,r<P.chart.xAxis.getMin()&&(r=P.chart.xAxis.getMin()),r>P.chart.xAxis.getMax()&&(r=P.chart.xAxis.getMax()),t.ctx.translate(P.chart.xAxis.toScreen(r),0),t.ctx.rotate(Math.PI/2)):(r=P.options.offset,r<P.chart.yAxis.getMin()&&(r=P.chart.yAxis.getMin()),r>P.chart.yAxis.getMax()&&(r=P.chart.yAxis.getMax()),t.ctx.translate(0,P.chart.yAxis.toScreen(r))),t.save(),0!==s.style.lineDash.length&&t.ctx.setLineDash(s.style.lineDash),t.drawLine(P.toScreen(s.min),0,P.toScreen(s.max),0),t.restore(),0!==s.style.arrowSize&&t.drawArrow(P.toScreen(s.max),0,o?Math.PI:0,s.style.arrowSize);var h=0,f=0,u=!1;switch(s.ticks.big.align){case"right":case"top":h=-s.ticks.big.size;break;case"center":case"middle":h=-s.ticks.big.size/2;break;case"left":case"bottom":h=0}switch(s.ticks.small.align){case"right":case"top":f=-s.ticks.small.size;break;case"center":case"middle":f=-s.ticks.small.size/2;break;case"left":case"bottom":f=0}var g,p,d;for("x"===s.type?(g=P.chart.yAxis.toScreen(P.chart.yAxis.getMin()),p=P.chart.yAxis.toScreen(P.chart.yAxis.getMax()),d=P.chart.yAxis.toScreen(r)):(g=-P.chart.xAxis.toScreen(P.chart.xAxis.getMin()),p=-P.chart.xAxis.toScreen(P.chart.xAxis.getMax()),d=-P.chart.xAxis.toScreen(r)),e=s.min,i=s.max-s.min;e<=s.max;)n=Math.floor(P.toScreen(e)),u=e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0)),u?(0!==s.grid.big.width&&(t.setLineStyle(s.grid.big.width,s.grid.big.color),t.setAlpha(s.grid.big.opacity),0!==s.grid.big.dash.length&&t.ctx.setLineDash(s.grid.big.dash),t.drawLine(n,g-d,n,p-d)),0!==s.ticks.size&&(t.setLineStyle(s.style.lineWidth,s.ticks.big.color),t.setAlpha(s.ticks.big.opacity),t.ctx.setLineDash([]),"dot"===s.ticks.big.type?(t.setFillColor(s.ticks.big.color),t.ctx.beginPath(),t.ctx.arc(n,h+s.ticks.big.size/2,s.ticks.big.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(n,h,n,h+s.ticks.big.size))):(0!==s.grid.small.width&&(t.setLineStyle(s.grid.small.width,s.grid.small.color),t.setAlpha(s.grid.small.opacity),0!==s.grid.small.dash.length&&t.ctx.setLineDash(s.grid.small.dash),t.drawLine(n,g-d,n,p-d)),0!==s.ticks.sizeSmall&&(t.setLineStyle(s.style.lineWidth,s.ticks.small.color),t.setAlpha(s.ticks.small.opacity),t.ctx.setLineDash([]),"dot"===s.ticks.small.type?(t.setFillColor(s.ticks.small.color),t.ctx.beginPath(),t.ctx.arc(n,f+s.ticks.small.size/2,s.ticks.small.size,0,2*Math.PI,!1),t.ctx.fill()):t.drawLine(n,f,n,f+s.ticks.small.size))),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(c));if(t.ctx.globalAlpha=1,t.ctx.setLineDash([]),0!==s.title.size){var m=s.title.align;switch("bottom"===m&&(m="left"),"top"===m&&(m="right"),m){case"left":n=0;break;case"right":n=Math.floor(P.toScreen(s.max));break;case"center":n=Math.floor(P.toScreen(s.min+(s.max-s.min)/2));break;default:n=0}t.setFillColor(s.title.color),t.drawText(s.name,n,s.title.offset+s.ticks.big.size+s.labels.size,s.title.size,m,"top",s.title.font,s.title.style)}var x=s.labels.big.align,y=s.labels.small.align;switch("bottom"===x?x="top":"top"===x&&(x="bottom"),"left"===x?x="right":"right"===x&&(x="left"),"bottom"===y?y="top":"top"===y&&(y="bottom"),"left"===y?y="right":"right"===y&&(y="left"),x){case"center":case"middle":h=0;break;case"top":case"left":h=s.ticks.big.size}switch(y){case"center":case"middle":f=0;break;case"top":case"left":f=s.ticks.small.size}for(e=s.min,i=s.max-s.min;e<=s.max;)n=Math.floor(P.toScreen(e)),e/s.ticks.big.interval===parseInt((e/s.ticks.big.interval).toFixed(0))?0!==s.ticks.big.size&&(t.setFillColor(s.labels.big.color),t.setAlpha(s.labels.big.opacity),t.drawText(e.toFixed(c),n,h,s.labels.big.size,"center",x,s.labels.big.font,s.labels.big.style)):0!==s.ticks.small.size&&(t.setFillColor(s.labels.small.color),t.setAlpha(s.labels.small.opacity),t.drawText(e.toFixed(c),n,f,s.labels.small.size,"center",y,s.labels.small.font,s.labels.small.style)),e+=s.ticks.small.interval,e=parseFloat(e.toFixed(c));t.setAlpha(1),t.resetTransform()}}function O(t){if(!P.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=P.chart.width;return"y"===P.options.type&&(e=P.chart.height),P.options.min+(t-P.options.margin.start)/(e-P.options.margin.start-P.options.margin.end)*(P.options.max-P.options.min)}function N(t){if(!P.chart)throw cl.Lang.get("errAxisHaveNoChart");var e=P.chart.width;return"x"===P.options.type?P.options.margin.start+(t-P.options.min)/(P.options.max-P.options.min)*(e-P.options.margin.start-P.options.margin.end):(e=P.chart.height,P.chart.height-(P.options.margin.start+(t-P.options.min)/(P.options.max-P.options.min)*(e-P.options.margin.start-P.options.margin.end)))}function I(){return P.parent.apply(),P}function _(t){return P.options.style.lineWidth=t,P}function R(){return P.options.style.lineWidth}function E(){P.options=null,P.chart=null}var P=this;P.parent=t,P.chart=t.chart,P.show=a,P.hide=o,P.apply=I,P.toAxis=O,P.setMin=C,P.setMax=T,P.getMax=F,P.getMin=L,P.render=z,P.setName=M,P.getName=S,P.destroy=E,P.setColor=y,P.getColor=b,P.toScreen=N,P.getOffset=k,P.setOffset=v,P.setMargins=A,P.getMargins=w,P.setLineWidth=_,P.getLineWidth=R,P.setTitleSize=d,P.getTitleSize=p,P.setTitleFont=g,P.getTitleFont=u,P.setTitleAlign=x,P.getTitleAlign=m,P.setTitleColor=f,P.getTitleColor=h,P.setTitleStyle=c,P.getTitleStyle=l,P.setTickInterval=n,P.getTickInterval=i,P.getTickIntervalSmall=r,P.setTickIntervalSmall=s,P.options={name:"",type:"x",min:0,max:100,offset:0,ticks:{big:{interval:10,size:8,align:"center",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line"},small:{interval:5,size:4,align:"bottom",color:cl.Consts.COLOR_GRAY,opacity:.8,type:"line"}},margin:{start:40,end:10},style:{lineWidth:2,color:cl.Consts.COLOR_GRAY,arrowSize:12,lineDash:[]},title:{size:14,align:"center",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_BLACK,style:"",offset:0},labels:{big:{size:10,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1},small:{size:8,align:"bottom",font:cl.Consts.FONT_NAME,color:cl.Consts.COLOR_GRAY,style:"",opacity:1}},grid:{big:{width:1,dash:[3,3],color:"#BEBEBE",opacity:.5},small:{width:1,dash:[10,10],color:"#EFEFEF",opacity:.5}},visible:!0},cl.Utils.merge(P.options,e||{}),e&&(e.min||e.max)&&(e.ticks&&e.ticks.big&&e.ticks.big.interval||(P.options.ticks.big.interval=parseFloat(((P.options.max-P.options.min)/10).toFixed(4))),e.ticks&&e.ticks.small&&e.ticks.small.interval||(P.options.ticks.small.interval=parseFloat(((P.options.max-P.options.min)/20).toFixed(4))))}return t}(),cl.AxisManager=function(){"use strict";function t(t){function e(){var t,e;for(o.surface.resetTransform(),o.surface.clear(),t=0,e=o.items.length;e>t;t++)o.items[t].render(o.surface)}function i(t){var e=new cl.Axis(o,t||{});return o.items.push(e),o.apply(),e}function n(t){var e,i;if("string"!=typeof t)return o.items[t];for(e=0,i=o.items.length;i>e;e++)if(o.items[e].getName()===t)return o.items[e]}function r(t){if(t){if(console.log(o),t===o.chart.xAxis||t===o.chart.yAxis)throw cl.Lang.get("errDelBaseAxis",t.options.type);var e=o.items.indexOf(t);-1!==e&&o.items[e]&&(o.items.splice(e,1),o.apply(),t.destroy())}}function s(t){switch(typeof t){case"object":r(t);break;default:r(n(t))}}var o=this;cl.Layer.call(o,t),o.add=i,o.get=n,o.remove=s,o.render=e,o.chart=t,o.items=[],o.dirtyFlagName="axis"}return cl.Utils.extend(t,cl.Layer),t}(),cl.Background=function(){"use strict";function t(e,i){function n(t){return a.options.fit=t,a}function r(){if(a.image&&a.options.visible){var e,i,n,r=a.options.align.x,s=a.options.align.y,o=a.chart.xAxis.toScreen(a.options.pos.x),l=a.chart.yAxis.toScreen(a.options.pos.y),c=a.chart.xAxis.getMargins(),h=a.chart.yAxis.getMargins();a.options.fitToScreen&&(o=0,l=a.chart.height,c.start=0,c.end=0,h.start=0,h.end=0);var f=a.image.width,u=a.image.height,g=a.chart.width-c.start-c.end,p=a.chart.height-h.start-h.end;switch(a.options.fit){case t.FIT_STRETCH:f=a.chart.width-c.start-c.end,u=a.chart.height-h.start-h.end;break;case t.FIT_ALL:e=g/f,i=p/u,n=Math.min(e,i),f*=n,u*=n,o=c.start+g/2,l=h.end+p/2,r="center",s="center";break;case t.FIT_FILL:e=g/f,i=p/u,n=Math.max(e,i),f*=n,u*=n,o=c.start+g/2,l=h.end+p/2,r="center",s="center"}switch(r){case"left":o-=0;break;case"right":o-=f;break;case"center":o-=f/2}switch(s){case"top":l-=0;break;case"bottom":l-=u;break;case"center":l-=u/2}a.surface.save(),a.options.fit===t.FIT_FILL&&(a.surface.ctx.rect(c.start,h.end,g,p),a.surface.ctx.clip()),a.surface.ctx.drawImage(a.image,Math.floor(o),Math.floor(l),f,u),a.surface.restore(),cl.Layer.prototype.render.call(a)}}function s(t){a.image=new Image,a.image.onload=function(){a.isLoaded=!0,a.apply()},a.image.src=t}function o(){a.image=null,cl.Layer.prototype.destroy.call(a)}var a=this;cl.Layer.call(a,e),a.dirtyFlagName="bg",a.image=null,a.isLoaded=!1,a.options={url:"",align:{x:"left",y:"bottom"},pos:{x:0,y:0},fit:t.FIT_ALL,fitToScreen:!1,visible:!0},cl.Utils.merge(a.options,i||{}),a.destroy=o,a.render=r,a.setFit=n,a.setImage=s,a.options.url&&a.setImage(a.options.url)}return cl.Utils.extend(t,cl.Layer),t.FIT_NONE=0,t.FIT_STRETCH=1,t.FIT_ALL=2,t.FIT_FILL=3,t}(),cl.Canvas=function(){"use strict";function t(t,e){function i(){d.ctx.restore()}function n(){d.ctx.save()}function r(t){d.ctx.fillStyle=t}function s(t,e){var i=e||cl.Consts.COLOR_BLACK;if(d.ctx.lineWidth=t,d.ctx.strokeStyle=i,m!==t){m=t;var n=t%2/2;x!==n&&(d.ctx.translate(-x,-x),x=n,d.ctx.translate(x,x))}}function o(t,e,i,n,r,s,o,a,l){var c=(n||cl.Consts.FONT_SIZE)+"px",h=o||cl.Consts.FONT_NAME,f=a||"",u=r||"left",g=s||"top";"center"===g&&(g="middle"),d.ctx.textBaseline=g,d.ctx.textAlign=u,d.ctx.font=f+" "+c+" "+h,void 0!==l?d.ctx.fillText(t,e,i,l):d.ctx.fillText(t,e,i)}function a(t,e,i,n,r){var s,o,a;a=r||Math.PI/10,s=Math.cos(i+a),o=Math.sin(i+a),d.ctx.beginPath(),d.ctx.moveTo(t,e),d.ctx.lineTo(t-s*n,e-o*n),s=Math.cos(i-a),o=Math.sin(i-a),d.ctx.lineTo(t-s*n,e-o*n),d.ctx.lineTo(t,e+1),d.ctx.closePath(),d.ctx.fill()}function l(t,e,i,n){d.ctx.beginPath(),d.ctx.moveTo(t,e),d.ctx.lineTo(i,n),d.ctx.stroke()}function c(t){return d.ctx.globalAlpha=t,d}function h(){d.ctx.setTransform(1,0,0,1,0,0)}function f(t,e,i){d.ctx.drawImage(t.el,e||0,i||0)}function u(){d.el.parentNode&&d.el.parentNode.removeChild(d.el),d.ctx=null,d.el=null}function g(){0!==x&&d.ctx.translate(-x,-x),d.ctx.clearRect(0,0,d.width,d.height),0!==x&&d.ctx.translate(x,x)}function p(t,e){d.el.width=t,d.el.height=e}var d=this,m=0,x=0;d.clear=g,d.destroy=u,d.resize=p,d.draw=f,d.drawLine=l,d.resetTransform=h,d.drawArrow=a,d.save=n,d.restore=i,d.setLineStyle=s,d.setFillColor=r,d.drawText=o,d.setAlpha=c,d.el=document.createElement("canvas"),d.ctx=this.el.getContext("2d"),Object.defineProperties(d,{width:{get:function(){return d.el.width}},height:{get:function(){return d.el.height}}}),d.resize(t,e)}return t}(),cl.Chart=function(){"use strict";function t(t){function e(){if(u.options.element){u.options.element.parentNode;u.options.preloader.classList.add("cl-preloader-hidden")}}function i(){if(u.options.element&&u.options.element.parentNode){var t=u.preloader,e=u.options.element.parentNode;t.classList.remove("hidden"),t.classList.remove("cl-preloader-hidden"),t.classList.add("cl-preloader");var i="",n=Math.floor(u.element.offsetLeft+u.width/2-t.offsetWidth/2),r=Math.floor(u.element.offsetTop+u.height/2-t.offsetHeight/2);i="left: "+n+"px; top: "+r+"px",i+=";"+t.getAttribute("style"),t.setAttribute("style",i),e.appendChild(t)}}function n(t){p[t]=!0}function r(){return u.background}function s(){g=!1,p.all=!1;for(var t in p)p.hasOwnProperty(t)&&(p[t]=!1)}function o(){if(p.all)return!0;for(var t in p)if(p.hasOwnProperty(t)&&p[t])return!0;return!1}function a(){g||(requestAnimFrame(c),g=!0)}function l(t){u.background.setImage(t)}function c(){if(u.screen){console.log("render");var t,e;for(t=0,e=u.layers.length;e>t;t++)(p.all||p[u.layers[t].dirtyFlagName])&&u.layers[t].render();for(u.screen.clear(),t=0,e=u.layers.length;e>t;t++)u.screen.draw(u.layers[t].surface);s()}}function h(t,e){var i,n;for(i=0,n=u.layers.length;n>i;i++)u.layers[i].resize(t,e);u.screen.resize(t,e),p.all=!0,u.redraw()}function f(){var t,e;for(t=0,e=u.layers.length;e>t;t++)u.layers[t].destroy();u.screen.destroy(),u.layers=[],u.screen=null,u.background=null,u.element=null}var u=this;u.options=t||{},u.xAxis=null,u.yAxis=null,u.preloader=u.options.preloader,u.element=u.options.element;var g=!1,p={all:!1};if(Object.defineProperties(u,{isDirty:{get:o},width:{get:function(){return u.screen.width}},height:{get:function(){return u.screen.height}}}),u.redraw=a,u.resize=h,u.destroy=f,u.setDirtyFlag=n,u.showPreloader=i,u.hidePreloader=e,u.getBackground=r,u.setBackground=l,!u.element)throw cl.Lang.get("errNoElements");u.screen=new cl.Canvas(t.width||u.element.offsetWidth,t.height||u.element.offsetHeight),u.background=new cl.Background(u,u.options.background||{}),u.axis=new cl.AxisManager(u),u.layers=[u.background,u.axis],u.xAxis=u.axis.add(cl.Utils.merge({type:"x"},u.options.xAxis||{})),u.yAxis=u.axis.add(cl.Utils.merge({type:"y"},u.options.yAxis||{})),u.element.appendChild(u.screen.el),u.redraw()}return t}();